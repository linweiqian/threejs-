{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\src\\components\\three\\three-base.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\src\\components\\three\\three-base.js","mtime":1672568489806},{"path":"C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\babel.config.js","mtime":1672558385433},{"path":"C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1672558679027},{"path":"C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1672558683394},{"path":"C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\node_modules\\babel-loader\\lib\\index.js","mtime":1672558678446}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBlbnVtZXJhYmxlT25seSAmJiAoc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pKSwga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gbnVsbCAhPSBhcmd1bWVudHNbaV0gPyBhcmd1bWVudHNbaV0gOiB7fTsgaSAlIDIgPyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKSA6IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gcmV0dXJuIHRhcmdldDsgfQoKaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAidGhyZWUiOwppbXBvcnQgeyBPcmJpdENvbnRyb2xzIH0gZnJvbSAidGhyZWUvZXhhbXBsZXMvanNtL2NvbnRyb2xzL09yYml0Q29udHJvbHMuanMiOwppbXBvcnQgeyBHTFRGTG9hZGVyIH0gZnJvbSAidGhyZWUvZXhhbXBsZXMvanNtL2xvYWRlcnMvR0xURkxvYWRlci5qcyI7CmltcG9ydCB7IE9CSkxvYWRlciB9IGZyb20gInRocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL09CSkxvYWRlci5qcyI7CmltcG9ydCB7IEZCWExvYWRlciB9IGZyb20gInRocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL0ZCWExvYWRlci5qcyI7CmltcG9ydCB7IFJHQkVMb2FkZXIgfSBmcm9tICJ0aHJlZS9leGFtcGxlcy9qc20vbG9hZGVycy9SR0JFTG9hZGVyLmpzIjsKaW1wb3J0IHsgQ2xvY2sgfSBmcm9tICJ0aHJlZSI7IC8v5byV5YWldHdlZW7liqjnlLvlupMKCmltcG9ydCBUV0VFTiwgeyBUd2VlbiB9IGZyb20gJ0B0d2VlbmpzL3R3ZWVuLmpzJzsKCnZhciBUaHJlZUJhc2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFRocmVlQmFzZShlbCwgb3B0aW9ucykgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGhyZWVCYXNlKTsKCiAgICB0aGlzLmRvbSA9IGVsOyAvLyDmj5LlhaXnmoRkb20KICAgIC8vIOmFjee9ruWPguaVsAoKICAgIHRoaXMub3B0ID0gX29iamVjdFNwcmVhZCh7CiAgICAgIHNjZW5lVXJsOiAiIiwKICAgICAgLy8g5Zy65pmvdXJsCiAgICAgIG1vZGVsVXJsOiAiIiwKICAgICAgLy8g5qih5Z6LdXJsCiAgICAgIGF1dG9Sb3RhdGU6IGZhbHNlLAogICAgICAvLyDmmK/lkKboh6rliqjml4vovawKICAgICAgaXNGdWxsQnJvd3NlcjogdHJ1ZQogICAgfSwgb3B0aW9ucyk7CiAgICB0aGlzLnNjZW5lID0gbnVsbDsgLy8g5Zy65pmvCgogICAgdGhpcy5jYW1lcmEgPSBudWxsOyAvLyDmkYTlg4/mnLoKCiAgICB0aGlzLnJlbmRlcmVyID0gbnVsbDsgLy8g5riy5p+T5ZmoCgogICAgdGhpcy5jb250cm9scyA9IG51bGw7IC8vIOaOp+WItuWZqAoKICAgIHRoaXMubW9kZWwgPSBudWxsOyAvLyDmqKHlnosKCiAgICB0aGlzLm1peGVyID0gbnVsbDsKICAgIHRoaXMudHdlZW4gPSBudWxsOwoKICAgIHRoaXMub3BlbkFuaW1hdGUgPSBmdW5jdGlvbiAodmFsKSB7CiAgICAgIC8vIHRoaXMudHdlZW4uc3RhcnQoKS8vdHdlZW7liqjnlLvlvIDlp4vmiafooYwo5L2g5Y+v5Lul6YCJ5oup5ZCI6YCC55qE5pe25YCZ6Kem5Y+R5omn6KGMKQogICAgICBfdGhpcy5UV0VFTkFuaW1hdGUoKTsKCiAgICAgIF90aGlzLmJveEhlaWdodCA9IHZhbDsKICAgIH07CgogICAgdGhpcy5pbml0KCk7CiAgfSAvLyDliJ3lp4vljJYKCgogIF9jcmVhdGVDbGFzcyhUaHJlZUJhc2UsIFt7CiAgICBrZXk6ICJpbml0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KCkgewogICAgICB0aGlzLnNjZW5lSW5pdCgpOwogICAgICB0aGlzLmNhbWVyYUluaXQoKTsKICAgICAgdGhpcy5yZW5kZXJJbml0KCk7CiAgICAgIHRoaXMuY29udHJvbHNJbml0KCk7CiAgICAgIHRoaXMuYW5pbWF0ZSgpOyAvLyDliqDovb3og4zmma/lm77niYcKCiAgICAgIGlmICh0aGlzLm9wdC5zY2VuZUJnKSB7CiAgICAgICAgdGhpcy5zY2VuZS5iYWNrZ3JvdW5kID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoKS5sb2FkKHRoaXMub3B0LnNjZW5lQmcpOwogICAgICB9IC8vIOWKoOi9veWcuuaZrwoKCiAgICAgIGlmICh0aGlzLm9wdC5zY2VuZVVybCkgewogICAgICAgIHRoaXMubG9hZFNjZW5lKHRoaXMub3B0LnNjZW5lVXJsKTsKICAgICAgfSAvLyDliqDovb3mqKHlnosKCgogICAgICBpZiAodGhpcy5vcHQubW9kZWxVcmwpIHsKICAgICAgICB0aGlzLmxvYWRNb2RlbCh0aGlzLm9wdC5tb2RlbFVybCk7CiAgICAgIH0gLy8g5ZON5bqU56qX5Y+j5aSn5bCP5pS55Y+YCgoKICAgICAgaWYgKHRoaXMub3B0LmlzRnVsbEJyb3dzZXIpIHsKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgdGhpcy5vbldpbmRvd1Jlc2l6ZS5iaW5kKHRoaXMpKTsKICAgICAgfQogICAgfSAvLyDlnLrmma/liJ3lp4vljJYKCiAgfSwgewogICAga2V5OiAic2NlbmVJbml0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzY2VuZUluaXQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5zY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpOwogICAgICB0aGlzLm9wdC5saWdodHMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgdmFyIF9pdGVtJG9iaiRwb3NpdGlvbjsKCiAgICAgICAgLy8gY29uc29sZS5sb2coNDk0OSxpdGVtKQogICAgICAgIGl0ZW0ub2JqLm5hbWUgPSBpdGVtLm5hbWU7CiAgICAgICAgaXRlbS5wb3NpdGlvbiAmJiAoX2l0ZW0kb2JqJHBvc2l0aW9uID0gaXRlbS5vYmoucG9zaXRpb24pLnNldC5hcHBseShfaXRlbSRvYmokcG9zaXRpb24sIF90b0NvbnN1bWFibGVBcnJheShpdGVtLnBvc2l0aW9uKSk7CiAgICAgICAgaXRlbS5IZWxwZXIgPSBuZXcgVEhSRUUuUG9pbnRMaWdodEhlbHBlcihpdGVtLm9iaik7CgogICAgICAgIF90aGlzMi5zY2VuZS5hZGQoaXRlbS5vYmopOwogICAgICB9KTsKICAgIH0gLy8g55u45py65Yid5aeL5YyWCgogIH0sIHsKICAgIGtleTogImNhbWVyYUluaXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNhbWVyYUluaXQoKSB7CiAgICAgIHRoaXMuY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDcwLCAvLyDmkYTlg4/mnLrop4bplKXkvZPlnoLnm7Top4bph47op5LluqYKICAgICAgdGhpcy5nZXRXaWR0aCgpIC8gdGhpcy5nZXRIZWlnaHQoKSwgLy8g5pGE5YOP5py66KeG6ZSl5L2T6ZW/5a695q+UCiAgICAgIDAuMDEsIC8vIOaRhOWDj+acuuinhumUpeS9k+i/keerr+mdogogICAgICAxMDAwIC8vIOaRhOWDj+acuuinhumUpeS9k+i/nOerr+mdogogICAgICApOyAvLyB0aGlzLmNhbWVyYS5wb3NpdGlvbi5zZXQoMCwgMiwgNSk7CiAgICB9IC8vIOa4suafk+WZqOWIneWni+WMlgoKICB9LCB7CiAgICBrZXk6ICJyZW5kZXJJbml0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJJbml0KCkgewogICAgICB0aGlzLnJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoewogICAgICAgIGFudGlhbGlhczogdHJ1ZSwKICAgICAgICAvLyDmipfplK/pvb8KICAgICAgICBhbHBoYTogdHJ1ZSAvLyBjYW52YXPmmK/lkKbljIXlkKthbHBoYQoKICAgICAgfSk7CiAgICAgIHRoaXMucmVuZGVyZXIuc2V0U2l6ZSh0aGlzLmdldFdpZHRoKCksIHRoaXMuZ2V0SGVpZ2h0KCkpOwogICAgICB0aGlzLnJlbmRlcmVyLnNldFBpeGVsUmF0aW8od2luZG93LmRldmljZVBpeGVsUmF0aW8pOwogICAgICB0aGlzLnJlbmRlcmVyLnRvbmVNYXBwaW5nID0gVEhSRUUuUmVpbmhhcmRUb25lTWFwcGluZzsgLy8gdGhpcy5yZW5kZXJlci50b25lTWFwcGluZ0V4cG9zdXJlID0gMTsgLy8g5pud5YWJ57O75pWwCgogICAgICB0aGlzLmRvbS5hcHBlbmRDaGlsZCh0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQpOwogICAgfSAvLyDmjqfliLblmajliJ3lp4vljJYKCiAgfSwgewogICAga2V5OiAiY29udHJvbHNJbml0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb250cm9sc0luaXQoKSB7CiAgICAgIHRoaXMuY29udHJvbHMgPSBuZXcgT3JiaXRDb250cm9scyh0aGlzLmNhbWVyYSwgdGhpcy5yZW5kZXJlci5kb21FbGVtZW50KTsKICAgICAgdGhpcy5jb250cm9scy5hdXRvUm90YXRlU3BlZWQgPSAxLjA7IC8vIOiHquWKqOaXi+i9rOmAn+W6pgoKICAgICAgdGhpcy5jb250cm9scy5hdXRvUm90YXRlID0gdGhpcy5hdXRvUm90YXRlOyAvLyDmmK/lkKboh6rliqjovazliqgKCiAgICAgIHRoaXMuY29udHJvbHMuZW5hYmxlWm9vbSA9IGZhbHNlOyAvLyB0aGlzLmNvbnRyb2xzLm1pblBvbGFyQW5nbGUgPSAoTWF0aC5QSSoxKS82CiAgICAgIC8vIHRoaXMuY29udHJvbHMubWF4UG9sYXJBbmdsZSA9IChNYXRoLlBJKjMpLzYKCiAgICAgIHRoaXMuY29udHJvbHMuZW5hYmxlRGFtcGluZyA9IHRydWU7IC8vIOaYr+WQpuaDr+aAp+a7keWKqAoKICAgICAgdGhpcy5jb250cm9scy5kYW1waW5nRmFjdG9yID0gMC4yOwogICAgICB0aGlzLmNvbnRyb2xzLnJvdGF0ZVNwZWVkID0gLjc1OyAvLyDmiYvliqjml4vovazpgJ/luqYKCiAgICAgIHRoaXMuY29udHJvbHNSb3RhdGUodGhpcy5vcHQuYXV0b1JvdGF0ZSk7CiAgICAgIHRoaXMuY29udHJvbHMudXBkYXRlKCk7CiAgICB9IC8vIOaOp+WItuWZqOaXi+i9rAoKICB9LCB7CiAgICBrZXk6ICJjb250cm9sc1JvdGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29udHJvbHNSb3RhdGUoYXV0b1JvdGF0ZSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMuY29udHJvbHMuYXV0b1JvdGF0ZSA9IGF1dG9Sb3RhdGUgfHwgZmFsc2U7CgogICAgICBpZiAoYXV0b1JvdGF0ZSkgewogICAgICAgIC8vIOWBnOatouaTjeS9nDNz5ZCO57un57ut6Ieq5Yqo6L2s5YqoCiAgICAgICAgdmFyIHRpbWVyID0gbnVsbDsKICAgICAgICB0aGlzLmNvbnRyb2xzLmFkZEV2ZW50TGlzdGVuZXIoInN0YXJ0IiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKHRpbWVyKSB7CiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXMzLmNvbnRyb2xzLmF1dG9Sb3RhdGUgPSBmYWxzZTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLmNvbnRyb2xzLmFkZEV2ZW50TGlzdGVuZXIoImVuZCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzMy5jb250cm9scy5hdXRvUm90YXRlID0gdHJ1ZTsKCiAgICAgICAgICAgIF90aGlzMy5jb250cm9scy51cGRhdGUoKTsKICAgICAgICAgIH0sIDMwMDApOwogICAgICAgIH0pOwogICAgICB9CiAgICB9IC8vIOWKqOeUu+a4suafkwoKICB9LCB7CiAgICBrZXk6ICJhbmltYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhbmltYXRlKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIC8vIHZhciBjbG9jayA9IG5ldyBUSFJFRS5DbG9jaygpCiAgICAgIFRXRUVOLnVwZGF0ZSgpOwogICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNC5hbmltYXRlKCk7CiAgICAgIH0pOwogICAgICB0aGlzLmNvbnRyb2xzLnVwZGF0ZSgpOwogICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzLnNjZW5lLCB0aGlzLmNhbWVyYSk7CiAgICB9IC8vIOWKoOi9veWcuuaZrwoKICB9LCB7CiAgICBrZXk6ICJsb2FkU2NlbmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWRTY2VuZSh1cmwpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICBpZiAoL1wuaGRyJC9pLnRlc3QodXJsKSkgewogICAgICAgIG5ldyBSR0JFTG9hZGVyKCkubG9hZCh1cmwsIGZ1bmN0aW9uICh0ZXh0dXJlKSB7CiAgICAgICAgICB0ZXh0dXJlLm1hcHBpbmcgPSBUSFJFRS5FcXVpcmVjdGFuZ3VsYXJSZWZsZWN0aW9uTWFwcGluZzsKICAgICAgICAgIF90aGlzNS5zY2VuZS5iYWNrZ3JvdW5kID0gdGV4dHVyZTsKICAgICAgICAgIF90aGlzNS5zY2VuZS5lbnZpcm9ubWVudCA9IHRleHR1cmU7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAoL1wuKGpwZ3xqcGVnfHBuZ3xnaWZ8Ym1wKSQvaS50ZXN0KHVybCkpIHsKICAgICAgICBuZXcgVEhSRUUuVGV4dHVyZUxvYWRlcigpLmxvYWQodXJsLCBmdW5jdGlvbiAodGV4dHVyZSkgewogICAgICAgICAgdGV4dHVyZS5tYXBwaW5nID0gVEhSRUUuRXF1aXJlY3Rhbmd1bGFyUmVmbGVjdGlvbk1hcHBpbmc7CiAgICAgICAgICB0ZXh0dXJlLndyYXBTID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7CiAgICAgICAgICB0ZXh0dXJlLndyYXBUID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7CiAgICAgICAgICBfdGhpczUuc2NlbmUuYmFja2dyb3VuZCA9IHRleHR1cmU7CiAgICAgICAgICBfdGhpczUuc2NlbmUuZW52aXJvbm1lbnQgPSB0ZXh0dXJlOwogICAgICAgIH0pOwogICAgICB9CiAgICB9IC8vIOWKoOi9veaooeWeiwoKICB9LCB7CiAgICBrZXk6ICJsb2FkTW9kZWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWRNb2RlbCh1cmwpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICB2YXIgbG9hZFRpcCA9IHRoaXMuYWRkTG9hZFRpcCgpOwoKICAgICAgaWYgKC9cLmdsdGYkL2kudGVzdCh1cmwpIHx8IC9cLmdsYiQvaS50ZXN0KHVybCkpIHsKICAgICAgICAvLyBHTFRG5qih5Z6L5Yqg6L29CiAgICAgICAgbmV3IEdMVEZMb2FkZXIoKS5sb2FkKHVybCwgZnVuY3Rpb24gKGdsdGYpIHsKICAgICAgICAgIGxvYWRUaXAudGV4dENvbnRlbnQgPSAi5Yqg6L295a6M5oiQ77yBIjsKICAgICAgICAgIGNvbnNvbGUubG9nKDExMSwgZ2x0Zik7CiAgICAgICAgICBnbHRmLnNjZW5lLnNjYWxlLnNldCgwLjYsIDAuNiwgMC42KTsKICAgICAgICAgIHZhciBhbWJpZW50ID0gbmV3IFRIUkVFLkFtYmllbnRMaWdodCgweGZmZmZmZiwgMSk7IC8v546v5aKD5YWJCgogICAgICAgICAgZ2x0Zi5zY2VuZS5hZGQoYW1iaWVudCk7CiAgICAgICAgICB2YXIgZGlyZWN0ID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoMHhmZmZmZmYsIDEpOyAvL+W5s+ihjOWFiQoKICAgICAgICAgIGRpcmVjdC5wb3NpdGlvbi5zZXQoMCwgMTUsIDUpOwogICAgICAgICAgZ2x0Zi5zY2VuZS5hZGQoZGlyZWN0KTsKICAgICAgICAgIHZhciBkaXJlY3RzID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoMHhmZmZmZmYsIDEpOyAvL+W5s+ihjOWFiQoKICAgICAgICAgIGRpcmVjdHMucG9zaXRpb24uc2V0KDAsIC01LCA1KTsKICAgICAgICAgIGdsdGYuc2NlbmUuYWRkKGRpcmVjdHMpOwogICAgICAgICAgdmFyIEhlbWlzcGhlcmVMaWdodCA9IG5ldyBUSFJFRS5IZW1pc3BoZXJlTGlnaHQoMHhmZmZmZmYsIDEpOyAvL+WNiueQg+WFiQoKICAgICAgICAgIEhlbWlzcGhlcmVMaWdodC5wb3NpdGlvbi5zZXQoMCwgMTUsIDApOwogICAgICAgICAgZ2x0Zi5zY2VuZS5hZGQoSGVtaXNwaGVyZUxpZ2h0KTsKICAgICAgICAgIHZhciBIZW1pc3BoZXJlTGlnaHRzID0gbmV3IFRIUkVFLkhlbWlzcGhlcmVMaWdodCgweGZmZmZmZiwgMSk7IC8v5Y2K55CD5YWJCgogICAgICAgICAgSGVtaXNwaGVyZUxpZ2h0cy5wb3NpdGlvbi5zZXQoMCwgMjUsIDUwKTsKICAgICAgICAgIGdsdGYuc2NlbmUuYWRkKEhlbWlzcGhlcmVMaWdodHMpOyAvLyBsZXQgUG9pbnRMaWdodCA9IG5ldyBUSFJFRS5Qb2ludExpZ2h0KDB4ZmZmZmZmLDEpLy/ngrnlhYnmupAKICAgICAgICAgIC8vIFBvaW50TGlnaHQucG9zaXRpb24uc2V0KDAsNSwwKQogICAgICAgICAgLy8gZ2x0Zi5zY2VuZS5hZGQoUG9pbnRMaWdodCkKICAgICAgICAgIC8vIGxldCBQb2ludExpZ2h0cyA9IG5ldyBUSFJFRS5Qb2ludExpZ2h0KDB4ZmZmZmZmLDEpLy/ngrnlhYnmupAKICAgICAgICAgIC8vIFBvaW50TGlnaHRzLnBvc2l0aW9uLnNldCgwLDE1LDcuNSkKICAgICAgICAgIC8vIGdsdGYuc2NlbmUuYWRkKFBvaW50TGlnaHRzKQogICAgICAgICAgLy8gbGV0IFNwb3RMaWdodCA9IG5ldyBUSFJFRS5TcG90TGlnaHQoMHhmZmZmZmYsMSkvL+iBmuWFieeBrwogICAgICAgICAgLy8gU3BvdExpZ2h0LnBvc2l0aW9uLnNldCg1LDE1LDcuNSkKICAgICAgICAgIC8vIGdsdGYuc2NlbmUuYWRkKFNwb3RMaWdodCkKICAgICAgICAgIC8vIGxldCBTcG90TGlnaHRzID0gbmV3IFRIUkVFLlNwb3RMaWdodCgweGZmZmZmZiwxKS8v6IGa5YWJ54GvCiAgICAgICAgICAvLyBTcG90TGlnaHRzLnBvc2l0aW9uLnNldCg1LDIwLDcuNSkKICAgICAgICAgIC8vIGdsdGYuc2NlbmUuYWRkKFNwb3RMaWdodHMpCiAgICAgICAgICAvLyBsZXQgbWVzaCA9IGdsdGYuc2NlbmUKICAgICAgICAgIC8vIG1lc2gubWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoewogICAgICAgICAgLy8gICAvLyDpu5jorqQgMC41LiAwLjDliLAxLjDkuYvpl7TnmoTlgLzlj6/nlKjkuo7nlJ/plIjnmoTph5HlsZ7lpJbop4IKICAgICAgICAgIC8vICAgbWV0YWxuZXNzOiAwLjUsCiAgICAgICAgICAvLyAgIC8vIOadkOaWmeeahOeyl+ezmeeoi+W6pi4gMC4w6KGo56S65bmz5ruR55qE6ZWc6Z2i5Y+N5bCE77yMMS4w6KGo56S65a6M5YWo5ryr5Y+N5bCELiDpu5jorqQgMC41CiAgICAgICAgICAvLyAgIHJvdWdobmVzczogMC41LAogICAgICAgICAgLy8gfSkKICAgICAgICAgIC8vIGdsdGYuc2NlbmUubWF0ZXJpYWwuc2hpbmluZXNzID0gMTsKICAgICAgICAgIC8vIGdsdGYuc2NlbmUuY2FzdFNoYWRvdyA9IHRydWU7CiAgICAgICAgICAvLyBnbHRmLnNjZW5lLnJlY2VpdmVTaGFkb3cgPSB0cnVlOwogICAgICAgICAgLy8gZ2x0Zi5zY2VuZS5tYXRlcmlhbC50cmFuc3BhcmVudCA9IHRydWU7IC8v5p2Q6LSo5YWB6K646YCP5piOIOWmguaenOacieeOu+eSg+adkOi0qOaXtuW8gOWQrwogICAgICAgICAgLy8gZ2x0Zi5zY2VuZS5tYXRlcmlhbC5vcGFjaXR5ID0gMTsgLy/mnZDotKjpu5jorqTpgI/mmI7luqYKCiAgICAgICAgICBpZiAoX3RoaXM2Lm1vZGVsKSB7CiAgICAgICAgICAgIF90aGlzNi5zY2VuZS5yZW1vdmUoX3RoaXM2Lm1vZGVsKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgbW9kZWwgPSBnbHRmLnNjZW5lOwogICAgICAgICAgX3RoaXM2Lm1vZGVsID0gbW9kZWw7CgogICAgICAgICAgX3RoaXM2LmFkanVzdE1vZGVsKG1vZGVsKTsKCiAgICAgICAgICBfdGhpczYuc2NlbmUuYWRkKF90aGlzNi5tb2RlbCk7CgogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGxvYWRUaXAuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICAgIH0sIDEwMDApOwogICAgICAgIH0sIGZ1bmN0aW9uICh4aHIpIHsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCh4aHIubG9hZGVkIC8geGhyLnRvdGFsICogMTAwKSArICclIGxvYWRlZCcpOwogICAgICAgICAgLy/liqDovb3ov5vluqYKICAgICAgICAgIGxvYWRUaXAudGV4dENvbnRlbnQgPSAi5Yqg6L295LitLi4uIjsKICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGxvYWRUaXAudGV4dENvbnRlbnQgPSAi5qih5Z6L5Yqg6L295aSx6LSl77yBIjsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIuaooeWei+WKoOi9veWksei0pToiLCBlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAoL1wub2JqJC9pLnRlc3QodXJsKSkgewogICAgICAgIC8vIE9CSuaooeWei+WKoOi9vQogICAgICAgIG5ldyBPQkpMb2FkZXIoKS5sb2FkKHVybCwgZnVuY3Rpb24gKG9iaikgewogICAgICAgICAgLy8gY29uc29sZS5sb2coOTk2LG9iaikKICAgICAgICAgIGxvYWRUaXAudGV4dENvbnRlbnQgPSAi5Yqg6L295a6M5oiQ77yBIjsKICAgICAgICAgIG9iai5zY2FsZS5zZXQoMC42LCAwLjYsIDAuNik7CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgLy8g546v5aKD5YWJCiAgICAgICAgICAgIHZhciBhbWJpZW50ID0gbmV3IFRIUkVFLkFtYmllbnRMaWdodCgweGZmZmZmZiwgMSk7CiAgICAgICAgICAgIHZhciBkaXJlY3QgPSBuZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCgweGZmZmZmZiwgMSk7CgogICAgICAgICAgICBfdGhpczYuc2NlbmUuYWRkKGFtYmllbnQpOwoKICAgICAgICAgICAgX3RoaXM2LnNjZW5lLmFkZChkaXJlY3QpOwogICAgICAgICAgfSwgMTAwMCk7CgogICAgICAgICAgaWYgKF90aGlzNi5tb2RlbCkgewogICAgICAgICAgICBfdGhpczYuc2NlbmUucmVtb3ZlKF90aGlzNi5tb2RlbCk7CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXM2LmFkanVzdE1vZGVsKG9iaik7CgogICAgICAgICAgX3RoaXM2Lm1vZGVsID0gb2JqOwoKICAgICAgICAgIF90aGlzNi5zY2VuZS5hZGQoX3RoaXM2Lm1vZGVsKTsKCiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbG9hZFRpcC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgfSwgZnVuY3Rpb24gKHhocikgewogICAgICAgICAgLy8gY29uc29sZS5sb2coKHhoci5sb2FkZWQgLyB4aHIudG90YWwgKiAxMDApICsgJyUgbG9hZGVkJyk7CiAgICAgICAgICAvL+WKoOi9vei/m+W6pgogICAgICAgICAgbG9hZFRpcC50ZXh0Q29udGVudCA9IHBhcnNlSW50KHhoci5sb2FkZWQgLyB4aHIudG90YWwgKiAxMDApICsgIiXliqDovb3kuK0uLi4iOwogICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5lcnJvcigi5qih5Z6L5Yqg6L295aSx6LSlOiIsIGVycm9yKTsKICAgICAgICAgIGxvYWRUaXAudGV4dENvbnRlbnQgPSAi5qih5Z6L5Yqg6L295aSx6LSl77yBIjsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICgvXC9tYW5oZV8wMS5mYngkL2kudGVzdCh1cmwpKSB7CiAgICAgICAgLy8gRkJY5qih5Z6L5Yqg6L29CiAgICAgICAgbmV3IEZCWExvYWRlcigpLmxvYWQodXJsLCBmdW5jdGlvbiAob2JqKSB7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyg0NTYsb2JqKQogICAgICAgICAgbG9hZFRpcC50ZXh0Q29udGVudCA9ICLliqDovb3lrozmiJDvvIEiOwogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIC8vIOeOr+Wig+WFiQogICAgICAgICAgICB2YXIgYW1iaWVudCA9IG5ldyBUSFJFRS5BbWJpZW50TGlnaHQoMHhmZmZmZmYsIDEpOwogICAgICAgICAgICB2YXIgZGlyZWN0ID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoMHhmZmZmZmYsIDEpOwoKICAgICAgICAgICAgX3RoaXM2LnNjZW5lLmFkZChhbWJpZW50KTsKCiAgICAgICAgICAgIF90aGlzNi5zY2VuZS5hZGQoZGlyZWN0KTsKICAgICAgICAgIH0sIDEwMDApOwoKICAgICAgICAgIGlmIChfdGhpczYubW9kZWwpIHsKICAgICAgICAgICAgX3RoaXM2LnNjZW5lLnJlbW92ZShfdGhpczYubW9kZWwpOwogICAgICAgICAgfQoKICAgICAgICAgIF90aGlzNi5hZGp1c3RNb2RlbChvYmopOwoKICAgICAgICAgIF90aGlzNi5tb2RlbCA9IG9iajsgLy8gdGhpcy5UV0VFTkFuaW1hdGUodGhpcy5tb2RlbC5jaGlsZHJlblswXSkKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKDE1OSx0aGlzLm1vZGVsLmNoaWxkcmVuWzBdLnBvc2l0aW9uKQoKICAgICAgICAgIF90aGlzNi5zY2VuZS5hZGQoX3RoaXM2Lm1vZGVsKTsKCiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbG9hZFRpcC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgfSwgZnVuY3Rpb24gKHhocikgewogICAgICAgICAgLy8gY29uc29sZS5sb2coKHhoci5sb2FkZWQgLyB4aHIudG90YWwpICogMTAwICsgIiUgbG9hZGVkIik7CiAgICAgICAgICAvL+WKoOi9vei/m+W6pgogICAgICAgICAgbG9hZFRpcC50ZXh0Q29udGVudCA9IHBhcnNlSW50KHhoci5sb2FkZWQgLyB4aHIudG90YWwgKiAxMDApICsgIiXliqDovb3kuK0uLi4iOwogICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5lcnJvcigi5qih5Z6L5Yqg6L295aSx6LSlOiIsIGVycm9yKTsKICAgICAgICAgIGxvYWRUaXAudGV4dENvbnRlbnQgPSAi5qih5Z6L5Yqg6L295aSx6LSl77yBIjsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICgvXC5mYngkL2kudGVzdCh1cmwpKSB7CiAgICAgICAgLy8gRkJY5qih5Z6L5Yqg6L29CiAgICAgICAgbmV3IEZCWExvYWRlcigpLmxvYWQodXJsLCBmdW5jdGlvbiAob2JqKSB7CiAgICAgICAgICBsb2FkVGlwLnRleHRDb250ZW50ID0gIuWKoOi9veWujOaIkO+8gSI7CiAgICAgICAgICBvYmouc2NhbGUuc2V0KDAuNiwgMC42LCAwLjYpOwogICAgICAgICAgdmFyIGNoaWxkID0gb2JqLmNoaWxkcmVuWzBdOwogICAgICAgICAgY2hpbGQubWF0ZXJpYWwuc2hpbmluZXNzID0gMTsKICAgICAgICAgIGNoaWxkLmNhc3RTaGFkb3cgPSB0cnVlOwogICAgICAgICAgY2hpbGQucmVjZWl2ZVNoYWRvdyA9IHRydWU7CiAgICAgICAgICBjaGlsZC5tYXRlcmlhbC50cmFuc3BhcmVudCA9IHRydWU7IC8v5p2Q6LSo5YWB6K646YCP5piOIOWmguaenOacieeOu+eSg+adkOi0qOaXtuW8gOWQrwoKICAgICAgICAgIGNoaWxkLm1hdGVyaWFsLm9wYWNpdHkgPSAxOyAvL+adkOi0qOm7mOiupOmAj+aYjuW6pgoKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAvLyDnjq/looPlhYkKICAgICAgICAgICAgdmFyIGFtYmllbnQgPSBuZXcgVEhSRUUuQW1iaWVudExpZ2h0KDB4ZmZmZmZmKTsKCiAgICAgICAgICAgIF90aGlzNi5zY2VuZS5hZGQoYW1iaWVudCk7CiAgICAgICAgICB9LCAxMDAwKTsKCiAgICAgICAgICBpZiAoX3RoaXM2Lm1vZGVsKSB7CiAgICAgICAgICAgIF90aGlzNi5zY2VuZS5yZW1vdmUoX3RoaXM2Lm1vZGVsKTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpczYuYWRqdXN0TW9kZWwob2JqKTsKCiAgICAgICAgICBfdGhpczYubW9kZWwgPSBvYmo7CgogICAgICAgICAgX3RoaXM2LnNjZW5lLmFkZChfdGhpczYubW9kZWwpOwoKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsb2FkVGlwLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICB9LCBmdW5jdGlvbiAoeGhyKSB7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZygoeGhyLmxvYWRlZCAvIHhoci50b3RhbCkgKiAxMDAgKyAiJSBsb2FkZWQiKTsKICAgICAgICAgIC8v5Yqg6L296L+b5bqmCiAgICAgICAgICBsb2FkVGlwLnRleHRDb250ZW50ID0gcGFyc2VJbnQoeGhyLmxvYWRlZCAvIHhoci50b3RhbCAqIDEwMCkgKyAiJeWKoOi9veS4rS4uLiI7CiAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCLmqKHlnovliqDovb3lpLHotKU6IiwgZXJyb3IpOwogICAgICAgICAgbG9hZFRpcC50ZXh0Q29udGVudCA9ICLmqKHlnovliqDovb3lpLHotKXvvIEiOwogICAgICAgIH0pOwogICAgICB9CiAgICB9IC8vIOagueaNruaooeWei+iwg+aVtOebuOacunBvc2l0aW9uCgogIH0sIHsKICAgIGtleTogImFkanVzdE1vZGVsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGp1c3RNb2RlbChtb2RlbCkgewogICAgICAvLyBtb2RlbC51cGRhdGVNYXRyaXhXb3JsZCgpOwogICAgICB2YXIgYm94MyA9IG5ldyBUSFJFRS5Cb3gzKCkuc2V0RnJvbU9iamVjdChtb2RlbCk7CiAgICAgIHZhciB2ZWN0b3IzID0gbmV3IFRIUkVFLlZlY3RvcjMoKTsKICAgICAgYm94My5nZXRTaXplKHZlY3RvcjMpOyAvLyBjb25zb2xlLmxvZyh2ZWN0b3IzKTsKCiAgICAgIG1vZGVsLnBvc2l0aW9uLnkgPSAtKHZlY3RvcjMueSAvIDQpOwogICAgICB2YXIgZGlzdGFuY2UgPSAodmVjdG9yMy54ICsgdmVjdG9yMy55ICsgdmVjdG9yMy56KSAvIDM7CiAgICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnNldCgwLCAwLCBkaXN0YW5jZSk7CiAgICAgIHRoaXMuY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTsKICAgICAgdGhpcy5zZXRTY2FsZVRvRml0U2l6ZShtb2RlbCk7CiAgICAgIHRoaXMuTW9kZWxBdXRvQ2VudGVyKG1vZGVsKTsKICAgIH0gLy8g5ZON5bqU56qX5Y+j5aSn5bCPCgogIH0sIHsKICAgIGtleTogIm9uV2luZG93UmVzaXplIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvbldpbmRvd1Jlc2l6ZSgpIHsKICAgICAgdGhpcy5jYW1lcmEuYXNwZWN0ID0gdGhpcy5nZXRXaWR0aCgpIC8gdGhpcy5nZXRIZWlnaHQoKTsKICAgICAgdGhpcy5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpOwogICAgICB0aGlzLnJlbmRlcmVyLnNldFNpemUodGhpcy5nZXRXaWR0aCgpLCB0aGlzLmdldEhlaWdodCgpKTsKICAgIH0gLy8g6I635Y+W5a695bqmCgogIH0sIHsKICAgIGtleTogImdldFdpZHRoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRXaWR0aCgpIHsKICAgICAgcmV0dXJuIHRoaXMub3B0LmlzRnVsbEJyb3dzZXIgPyB3aW5kb3cuaW5uZXJXaWR0aCA6IHRoaXMuZG9tLm9mZnNldFdpZHRoOwogICAgfSAvLyDojrflj5bpq5jluqYKCiAgfSwgewogICAga2V5OiAiZ2V0SGVpZ2h0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRIZWlnaHQoKSB7CiAgICAgIHJldHVybiB0aGlzLm9wdC5pc0Z1bGxCcm93c2VyID8gd2luZG93LmlubmVySGVpZ2h0IDogdGhpcy5kb20ub2Zmc2V0SGVpZ2h0OwogICAgfQogICAgLyoqDQogICAgICog6K6+572u5Yqg6L295qih5Z6L5bGF5LitDQogICAgICoge09iamVjdH0gZ3JvdXAg5qih5Z6L5a+56LGhDQogICAgICovCgogIH0sIHsKICAgIGtleTogIk1vZGVsQXV0b0NlbnRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gTW9kZWxBdXRvQ2VudGVyKGdyb3VwKSB7CiAgICAgIC8qKg0KICAgICAgICog5YyF5Zu055uS5YWo6Ieq5Yqo6K6h566X77ya5qih5Z6L5pW05L2T5bGF5LitDQogICAgICAgKi8KICAgICAgdmFyIGJveDMgPSBuZXcgVEhSRUUuQm94MygpOyAvLyDorqHnrpflsYLnuqfmqKHlnotncm91cOeahOWMheWbtOebkgogICAgICAvLyDmqKHlnotncm91cOaYr+WKoOi9veS4gOS4quS4iee7tOaooeWei+i/lOWbnueahOWvueixoe+8jOWMheWQq+WkmuS4que9keagvOaooeWeiwoKICAgICAgYm94My5leHBhbmRCeU9iamVjdChncm91cCk7IC8vIOiuoeeul+S4gOS4quWxgue6p+aooeWei+WvueW6lOWMheWbtOebkueahOWHoOS9leS9k+S4reW/g+WcqOS4lueVjOWdkOagh+S4reeahOS9jee9rgoKICAgICAgdmFyIGNlbnRlciA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7CiAgICAgIGJveDMuZ2V0Q2VudGVyKGNlbnRlcik7IC8vIGNvbnNvbGUubG9nKCfmn6XnnIvlh6DkvZXkvZPkuK3lv4PlnZDmoIcnLCBjZW50ZXIpOwogICAgICAvLyDph43mlrDorr7nva7mqKHlnovnmoTkvY3nva7vvIzkvb/kuYvlsYXkuK3jgIIKCiAgICAgIGdyb3VwLnBvc2l0aW9uLnggPSBncm91cC5wb3NpdGlvbi54IC0gY2VudGVyLng7CiAgICAgIGdyb3VwLnBvc2l0aW9uLnkgPSBncm91cC5wb3NpdGlvbi55IC0gY2VudGVyLnk7CiAgICAgIGdyb3VwLnBvc2l0aW9uLnogPSBncm91cC5wb3NpdGlvbi56IC0gY2VudGVyLno7CiAgICB9IC8v6I635Y+W5qih5Z6L6YCC5ZCI6KeC5a+f55qE57yp5pS+55qE5q+U5L6LCgogIH0sIHsKICAgIGtleTogImdldEZpdFNjYWxlVmFsdWUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEZpdFNjYWxlVmFsdWUob2JqKSB7CiAgICAgIHZhciBib3hIZWxwZXIgPSBuZXcgVEhSRUUuQm94SGVscGVyKG9iaik7CiAgICAgIGJveEhlbHBlci5nZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3goKTsKICAgICAgdmFyIGJveCA9IGJveEhlbHBlci5nZW9tZXRyeS5ib3VuZGluZ0JveDsKICAgICAgdmFyIG1heERpYW1ldGVyID0gTWF0aC5tYXgoYm94Lm1heC54IC0gYm94Lm1pbi54LCBib3gubWF4LnkgLSBib3gubWluLnksIGJveC5tYXgueiAtIGJveC5taW4ueik7IC8vIGNvbnNvbGUubG9nKHRoaXMuY2FtZXJhLnBvc2l0aW9uLnogLyBtYXhEaWFtZXRlciwgInRoaXMuQ2FtZXJhLnBvc2l0aW9uLnogLyBtYXhEaWFtZXRlciIpOwoKICAgICAgcmV0dXJuIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnogLyBtYXhEaWFtZXRlcjsKICAgIH0gLy/orr7nva7mqKHlnovliLDpgILlkIjop4Llr5/nmoTlpKflsI8KCiAgfSwgewogICAga2V5OiAic2V0U2NhbGVUb0ZpdFNpemUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFNjYWxlVG9GaXRTaXplKG9iaikgewogICAgICAvLyBjb25zb2xlLmxvZyg0ODQ4LG9iaikKICAgICAgdmFyIHNjYWxlVmFsdWUgPSB0aGlzLmdldEZpdFNjYWxlVmFsdWUob2JqKSAqIDAuNDsgLy8gdmFyIHNjYWxlVmFsdWUgPSB0aGlzLmdldEZpdFNjYWxlVmFsdWUob2JqKTsKCiAgICAgIG9iai5zY2FsZS5zZXQoc2NhbGVWYWx1ZSwgc2NhbGVWYWx1ZSwgc2NhbGVWYWx1ZSk7CiAgICAgIHJldHVybiBzY2FsZVZhbHVlOwogICAgfSAvL+a3u+WKoOWKoOi9vei/m+W6pgoKICB9LCB7CiAgICBrZXk6ICJhZGRMb2FkVGlwIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRMb2FkVGlwKCkgewogICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImJvZHkiKTsKICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmxvYWRUaXAiKSAmJiBlbGVtZW50LnJlbW92ZUNoaWxkKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5sb2FkVGlwIikpOwogICAgICB2YXIgbG9hZFRpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICBsb2FkVGlwLmNsYXNzTmFtZSA9ICJsb2FkVGlwIjsKICAgICAgbG9hZFRpcC5zdHlsZS5jc3NUZXh0ICs9ICJwb3NpdGlvbjpmaXhlZDt0b3A6NTAlO2xlZnQ6NTAlO3RyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSwtNTAlKTtib3JkZXItcmFkaXVzOjVweDtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsMC41KTtwYWRkaW5nOjVweCAxMHB4O2NvbG9yOiNmZmY7IjsKICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChsb2FkVGlwKTsKICAgICAgcmV0dXJuIGxvYWRUaXA7CiAgICB9IC8v5qih5Z6LVFdFRU7liqjnlLsKCiAgfSwgewogICAga2V5OiAiVFdFRU5BbmltYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBUV0VFTkFuaW1hdGUoKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuYm94SGVpZ2h0KQogICAgICB0aGlzLm1vZGVsLmNoaWxkcmVuWzBdLnBvc2l0aW9uLnkgPSB0aGlzLmJveEhlaWdodCAvIDEwMCArIDIuMzsgLy8gaWYodGhpcy5ib3hIZWlnaHQ+OTUpewogICAgICAvLyAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmPSdodHRwOi8vMTkyLjE2OC42LjIzMTo4MDgwLyMvTW9kZWxCb3gnCiAgICAgIC8vIH0KICAgICAgLy8gdmFyIHBvcyA9IHsKICAgICAgLy8gICB5OiBtZXNoLnBvc2l0aW9uLnksCiAgICAgIC8vIH0KICAgICAgLy8gdGhpcy50d2VlbiA9IG5ldyBUV0VFTi5Ud2Vlbihwb3MpOwogICAgICAvLyAvLyBjb25zb2xlLmxvZygxLG1lc2gucG9zaXRpb24ueSkKICAgICAgLy8gdGhpcy50d2Vlbi50byh7IHk6IDMuNSB9LCAyMDAwKS5vblVwZGF0ZShmdW5jdGlvbiAoKSB7CiAgICAgIC8vICAgbWVzaC5wb3NpdGlvbi55ID0gcG9zLnk7CiAgICAgIC8vIH0pLm9uQ29tcGxldGUoKCk9PnsKICAgICAgLy8gICAvLyBodHRwOi8vMTkyLjE2OC42LjIzMTo4MDgwLyMvTW9kZWxCb3gKICAgICAgLy8gICAvLyBodHRwczovL3d4LndlY2hhdGxlZS5jb20vYmJoMjIvIy9Nb2RlbEJveAogICAgICAvLyAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmPSdodHRwOi8vMTkyLjE2OC42LjIzMTo4MDgwLyMvTW9kZWxCb3gnCiAgICAgIC8vICAgLy8gY29uc29sZS5sb2cod2luZG93LmxvY2F0aW9uLmhyZWYpCiAgICAgIC8vICAgLy8gY29uc29sZS5sb2coJ+aJp+ihjOaIkOWKnycpCiAgICAgIC8vIH0pOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFRocmVlQmFzZTsKfSgpOwoKZXhwb3J0IHsgVGhyZWVCYXNlIGFzIGRlZmF1bHQgfTs="},{"version":3,"names":["THREE","OrbitControls","GLTFLoader","OBJLoader","FBXLoader","RGBELoader","Clock","TWEEN","Tween","ThreeBase","el","options","dom","opt","sceneUrl","modelUrl","autoRotate","isFullBrowser","scene","camera","renderer","controls","model","mixer","tween","openAnimate","val","TWEENAnimate","boxHeight","init","sceneInit","cameraInit","renderInit","controlsInit","animate","sceneBg","background","TextureLoader","load","loadScene","loadModel","window","addEventListener","onWindowResize","bind","Scene","lights","map","item","obj","name","position","set","Helper","PointLightHelper","add","PerspectiveCamera","getWidth","getHeight","WebGLRenderer","antialias","alpha","setSize","setPixelRatio","devicePixelRatio","toneMapping","ReinhardToneMapping","appendChild","domElement","autoRotateSpeed","enableZoom","enableDamping","dampingFactor","rotateSpeed","controlsRotate","update","timer","clearTimeout","setTimeout","requestAnimationFrame","render","url","test","texture","mapping","EquirectangularReflectionMapping","environment","wrapS","RepeatWrapping","wrapT","loadTip","addLoadTip","gltf","textContent","console","log","scale","ambient","AmbientLight","direct","DirectionalLight","directs","HemisphereLight","HemisphereLights","remove","adjustModel","style","display","xhr","error","parseInt","loaded","total","child","children","material","shininess","castShadow","receiveShadow","transparent","opacity","box3","Box3","setFromObject","vector3","Vector3","getSize","y","distance","x","z","updateProjectionMatrix","setScaleToFitSize","ModelAutoCenter","aspect","innerWidth","offsetWidth","innerHeight","offsetHeight","group","expandByObject","center","getCenter","boxHelper","BoxHelper","geometry","computeBoundingBox","box","boundingBox","maxDiameter","Math","max","min","scaleValue","getFitScaleValue","element","document","querySelector","removeChild","createElement","className","cssText"],"sources":["C:/Users/Administrator/Desktop/个人项目/3d-model-h5game/src/components/three/three-base.js"],"sourcesContent":["import * as THREE from \"three\";\r\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls.js\";\r\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader.js\";\r\nimport { OBJLoader } from \"three/examples/jsm/loaders/OBJLoader.js\";\r\nimport { FBXLoader } from \"three/examples/jsm/loaders/FBXLoader.js\";\r\nimport { RGBELoader } from \"three/examples/jsm/loaders/RGBELoader.js\";\r\nimport { Clock } from \"three\";\r\n//引入tween动画库\r\nimport TWEEN, { Tween } from '@tweenjs/tween.js';\r\n\r\nexport default class ThreeBase {\r\n  constructor(el, options) {\r\n    this.dom = el; // 插入的dom\r\n    // 配置参数\r\n    this.opt = {\r\n      sceneUrl: \"\", // 场景url\r\n      modelUrl: \"\", // 模型url\r\n      autoRotate: false, // 是否自动旋转\r\n      isFullBrowser: true, // 生成的canvas是否铺满浏览器\r\n      ...options,\r\n    };\r\n    this.scene = null; // 场景\r\n    this.camera = null; // 摄像机\r\n    this.renderer = null; // 渲染器\r\n    this.controls = null; // 控制器\r\n    this.model = null; // 模型\r\n    this.mixer = null;\r\n    this.tween = null;\r\n    this.openAnimate = (val) => {\r\n      // this.tween.start()//tween动画开始执行(你可以选择合适的时候触发执行)\r\n      this.TWEENAnimate()\r\n      this.boxHeight = val;\r\n    };\r\n    this.init();\r\n  }\r\n  // 初始化\r\n  init() {\r\n    this.sceneInit();\r\n    this.cameraInit();\r\n    this.renderInit();\r\n    this.controlsInit();\r\n    this.animate();\r\n\r\n    // 加载背景图片\r\n    if (this.opt.sceneBg) {\r\n      this.scene.background = new THREE.TextureLoader().load(this.opt.sceneBg);\r\n    }\r\n    // 加载场景\r\n    if (this.opt.sceneUrl) {\r\n      this.loadScene(this.opt.sceneUrl);\r\n    }\r\n    // 加载模型\r\n    if (this.opt.modelUrl) {\r\n      this.loadModel(this.opt.modelUrl);\r\n    }\r\n    // 响应窗口大小改变\r\n    if (this.opt.isFullBrowser) {\r\n      window.addEventListener(\"resize\", this.onWindowResize.bind(this));\r\n    }\r\n  }\r\n  // 场景初始化\r\n  sceneInit() {\r\n    this.scene = new THREE.Scene();\r\n    this.opt.lights.map((item) => {\r\n      // console.log(4949,item)\r\n      item.obj.name = item.name;\r\n      item.position && item.obj.position.set(...item.position);\r\n      item.Helper = new THREE.PointLightHelper(item.obj);\r\n      this.scene.add(item.obj);\r\n    });\r\n  }\r\n  // 相机初始化\r\n  cameraInit() {\r\n    this.camera = new THREE.PerspectiveCamera(\r\n      70, // 摄像机视锥体垂直视野角度\r\n      this.getWidth() / this.getHeight(), // 摄像机视锥体长宽比\r\n      0.01, // 摄像机视锥体近端面\r\n      1000 // 摄像机视锥体远端面\r\n    );\r\n    // this.camera.position.set(0, 2, 5);\r\n  }\r\n  // 渲染器初始化\r\n  renderInit() {\r\n    this.renderer = new THREE.WebGLRenderer({\r\n      antialias: true, // 抗锯齿\r\n      alpha: true, // canvas是否包含alpha\r\n    });\r\n    this.renderer.setSize(this.getWidth(), this.getHeight());\r\n    this.renderer.setPixelRatio(window.devicePixelRatio);\r\n    this.renderer.toneMapping = THREE.ReinhardToneMapping;\r\n    // this.renderer.toneMappingExposure = 1; // 曝光系数\r\n    this.dom.appendChild(this.renderer.domElement);\r\n  }\r\n  // 控制器初始化\r\n  controlsInit() {\r\n    this.controls = new OrbitControls(this.camera, this.renderer.domElement);\r\n    this.controls.autoRotateSpeed = 1.0; // 自动旋转速度\r\n    this.controls.autoRotate = this.autoRotate; // 是否自动转动\r\n    this.controls.enableZoom = false\r\n    // this.controls.minPolarAngle = (Math.PI*1)/6\r\n    // this.controls.maxPolarAngle = (Math.PI*3)/6\r\n    this.controls.enableDamping = true; // 是否惯性滑动\r\n    this.controls.dampingFactor = 0.2;\r\n    this.controls.rotateSpeed = .75; // 手动旋转速度\r\n    this.controlsRotate(this.opt.autoRotate);\r\n    this.controls.update();\r\n  }\r\n  // 控制器旋转\r\n  controlsRotate(autoRotate) {\r\n    this.controls.autoRotate = autoRotate || false;\r\n    if (autoRotate) {\r\n      // 停止操作3s后继续自动转动\r\n      let timer = null;\r\n      this.controls.addEventListener(\"start\", () => {\r\n        if (timer) {\r\n          clearTimeout(timer);\r\n        }\r\n        this.controls.autoRotate = false;\r\n      });\r\n      this.controls.addEventListener(\"end\", () => {\r\n        timer = setTimeout(() => {\r\n          this.controls.autoRotate = true;\r\n          this.controls.update();\r\n        }, 3000);\r\n      });\r\n    }\r\n  }\r\n  // 动画渲染\r\n  animate() {\r\n    // var clock = new THREE.Clock()\r\n    TWEEN.update();\r\n    requestAnimationFrame(() => {\r\n      this.animate();\r\n    });\r\n    this.controls.update();\r\n    this.renderer.render(this.scene, this.camera);\r\n  }\r\n  // 加载场景\r\n  loadScene(url) {\r\n    if (/\\.hdr$/i.test(url)) {\r\n      new RGBELoader().load(url, (texture) => {\r\n        texture.mapping = THREE.EquirectangularReflectionMapping;\r\n        this.scene.background = texture;\r\n        this.scene.environment = texture;\r\n      });\r\n    } else if (/\\.(jpg|jpeg|png|gif|bmp)$/i.test(url)) {\r\n      new THREE.TextureLoader().load(url, (texture) => {\r\n        texture.mapping = THREE.EquirectangularReflectionMapping;\r\n        texture.wrapS = THREE.RepeatWrapping;\r\n        texture.wrapT = THREE.RepeatWrapping;\r\n        this.scene.background = texture;\r\n        this.scene.environment = texture;\r\n      });\r\n    }\r\n  }\r\n  // 加载模型\r\n  loadModel(url) {\r\n    const loadTip = this.addLoadTip();\r\n    if (/\\.gltf$/i.test(url)||/\\.glb$/i.test(url)) {\r\n      // GLTF模型加载\r\n      new GLTFLoader().load(\r\n        url,\r\n        (gltf) => {\r\n          loadTip.textContent = \"加载完成！\";\r\n          console.log(111,gltf)\r\n          gltf.scene.scale.set(0.6,0.6,0.6)\r\n         \r\n          let ambient = new THREE.AmbientLight(0xffffff,1);//环境光\r\n          gltf.scene.add(ambient);\r\n\r\n          let direct = new THREE.DirectionalLight(0xffffff,1)//平行光\r\n          direct.position.set(0,15,5)\r\n          gltf.scene.add(direct)\r\n\r\n          let directs = new THREE.DirectionalLight(0xffffff,1)//平行光\r\n          directs.position.set(0,-5,5)\r\n          gltf.scene.add(directs)\r\n\r\n\r\n          let HemisphereLight = new THREE.HemisphereLight(0xffffff,1)//半球光\r\n          HemisphereLight.position.set(0,15,0)\r\n          gltf.scene.add(HemisphereLight)\r\n\r\n          let HemisphereLights = new THREE.HemisphereLight(0xffffff,1)//半球光\r\n          HemisphereLights.position.set(0,25,50)\r\n          gltf.scene.add(HemisphereLights)\r\n\r\n\r\n          // let PointLight = new THREE.PointLight(0xffffff,1)//点光源\r\n          // PointLight.position.set(0,5,0)\r\n          // gltf.scene.add(PointLight)\r\n\r\n          // let PointLights = new THREE.PointLight(0xffffff,1)//点光源\r\n          // PointLights.position.set(0,15,7.5)\r\n          // gltf.scene.add(PointLights)\r\n\r\n\r\n          // let SpotLight = new THREE.SpotLight(0xffffff,1)//聚光灯\r\n          // SpotLight.position.set(5,15,7.5)\r\n          // gltf.scene.add(SpotLight)\r\n\r\n          // let SpotLights = new THREE.SpotLight(0xffffff,1)//聚光灯\r\n          // SpotLights.position.set(5,20,7.5)\r\n          // gltf.scene.add(SpotLights)\r\n\r\n          // let mesh = gltf.scene\r\n          // mesh.material = new THREE.MeshStandardMaterial({\r\n          //   // 默认 0.5. 0.0到1.0之间的值可用于生锈的金属外观\r\n          //   metalness: 0.5,\r\n          //   // 材料的粗糙程度. 0.0表示平滑的镜面反射，1.0表示完全漫反射. 默认 0.5\r\n          //   roughness: 0.5,\r\n          // })\r\n          // gltf.scene.material.shininess = 1;\r\n          // gltf.scene.castShadow = true;\r\n          // gltf.scene.receiveShadow = true;\r\n\r\n          // gltf.scene.material.transparent = true; //材质允许透明 如果有玻璃材质时开启\r\n          // gltf.scene.material.opacity = 1; //材质默认透明度\r\n          if (this.model) {\r\n            this.scene.remove(this.model);\r\n          }\r\n\r\n          let model = gltf.scene;\r\n          this.model = model;\r\n          this.adjustModel(model);\r\n          this.scene.add(this.model);\r\n\r\n          setTimeout(() => {\r\n            loadTip.style.display = \"none\";\r\n          }, 1000);\r\n        },\r\n        (xhr) => {\r\n          // console.log((xhr.loaded / xhr.total * 100) + '% loaded');\r\n          //加载进度\r\n          loadTip.textContent = \"加载中...\";\r\n        },\r\n        (error) => {\r\n          loadTip.textContent = \"模型加载失败！\";\r\n          console.error(\"模型加载失败:\", error);\r\n        }\r\n      );\r\n    } else if (/\\.obj$/i.test(url)) {\r\n      // OBJ模型加载\r\n      new OBJLoader().load(\r\n        url,\r\n        (obj) => {\r\n          // console.log(996,obj)\r\n          loadTip.textContent = \"加载完成！\";\r\n          obj.scale.set(0.6,0.6,0.6)\r\n          setTimeout(() => {\r\n            // 环境光\r\n          let ambient = new THREE.AmbientLight(0xffffff,1);\r\n          let direct   = new THREE.DirectionalLight(0xffffff,1)\r\n          this.scene.add(ambient);\r\n          this.scene.add(direct)\r\n          }, 1000);\r\n          if (this.model) {\r\n            this.scene.remove(this.model);\r\n          }\r\n          this.adjustModel(obj);\r\n          this.model = obj;\r\n          this.scene.add(this.model);\r\n          \r\n          setTimeout(() => {\r\n            loadTip.style.display = \"none\";\r\n          }, 1000);\r\n        },\r\n        (xhr) => {\r\n          // console.log((xhr.loaded / xhr.total * 100) + '% loaded');\r\n          //加载进度\r\n          loadTip.textContent = parseInt((xhr.loaded / xhr.total) * 100) + \"%加载中...\";\r\n        },\r\n        (error) => {\r\n          console.error(\"模型加载失败:\", error);\r\n          loadTip.textContent = \"模型加载失败！\";\r\n        }\r\n      );\r\n    } else if (/\\/manhe_01.fbx$/i.test(url)) {\r\n      // FBX模型加载\r\n      new FBXLoader().load(\r\n        url,\r\n        (obj) => {\r\n          // console.log(456,obj)\r\n          loadTip.textContent = \"加载完成！\";\r\n          setTimeout(() => {\r\n            // 环境光\r\n            let ambient = new THREE.AmbientLight(0xffffff,1);\r\n            let direct   = new THREE.DirectionalLight(0xffffff,1)\r\n            this.scene.add(ambient);\r\n            this.scene.add(direct)\r\n          }, 1000);\r\n\r\n          if (this.model) {\r\n            this.scene.remove(this.model);\r\n          }\r\n          this.adjustModel(obj);\r\n          this.model = obj;\r\n          // this.TWEENAnimate(this.model.children[0])\r\n          // console.log(159,this.model.children[0].position)\r\n          this.scene.add(this.model);\r\n          \r\n\r\n          setTimeout(() => {\r\n            loadTip.style.display = \"none\";\r\n          }, 1000);\r\n        },\r\n        (xhr) => {\r\n          // console.log((xhr.loaded / xhr.total) * 100 + \"% loaded\");\r\n          //加载进度\r\n          loadTip.textContent = parseInt((xhr.loaded / xhr.total) * 100) + \"%加载中...\";\r\n        },\r\n        (error) => {\r\n          console.error(\"模型加载失败:\", error);\r\n          loadTip.textContent = \"模型加载失败！\";\r\n        }\r\n      );\r\n    }else if (/\\.fbx$/i.test(url)) {\r\n      // FBX模型加载\r\n      new FBXLoader().load(\r\n        url,\r\n        (obj) => {\r\n          loadTip.textContent = \"加载完成！\";\r\n          obj.scale.set(0.6,0.6,0.6)\r\n            let child = obj.children[0]\r\n            child.material.shininess = 1;\r\n            child.castShadow = true;\r\n            child.receiveShadow = true;\r\n\r\n            child.material.transparent = true; //材质允许透明 如果有玻璃材质时开启\r\n            child.material.opacity = 1; //材质默认透明度\r\n            setTimeout(() => {\r\n              // 环境光\r\n            let ambient = new THREE.AmbientLight(0xffffff);\r\n            this.scene.add(ambient);\r\n            }, 1000);\r\n\r\n          if (this.model) {\r\n            this.scene.remove(this.model);\r\n          }\r\n          this.adjustModel(obj);\r\n          this.model = obj;\r\n          this.scene.add(this.model);\r\n          \r\n          setTimeout(() => {\r\n            loadTip.style.display = \"none\";\r\n          }, 1000);\r\n        },\r\n        (xhr) => {\r\n          // console.log((xhr.loaded / xhr.total) * 100 + \"% loaded\");\r\n          //加载进度\r\n          loadTip.textContent = parseInt((xhr.loaded / xhr.total) * 100) + \"%加载中...\";\r\n        },\r\n        (error) => {\r\n          console.error(\"模型加载失败:\", error);\r\n          loadTip.textContent = \"模型加载失败！\";\r\n        }\r\n      );\r\n    }\r\n  }\r\n  // 根据模型调整相机position\r\n  adjustModel(model) {\r\n    // model.updateMatrixWorld();\r\n    let box3 = new THREE.Box3().setFromObject(model);\r\n    let vector3 = new THREE.Vector3();\r\n    box3.getSize(vector3);\r\n    // console.log(vector3);\r\n    model.position.y = -(vector3.y / 4);\r\n    let distance = (vector3.x + vector3.y + vector3.z) / 3;\r\n    this.camera.position.set(0, 0, distance);\r\n    this.camera.updateProjectionMatrix();\r\n    this.setScaleToFitSize(model);\r\n    this.ModelAutoCenter(model);\r\n  }\r\n  // 响应窗口大小\r\n  onWindowResize() {\r\n    this.camera.aspect = this.getWidth() / this.getHeight();\r\n    this.camera.updateProjectionMatrix();\r\n    this.renderer.setSize(this.getWidth(), this.getHeight());\r\n  }\r\n  // 获取宽度\r\n  getWidth() {\r\n    return this.opt.isFullBrowser ? window.innerWidth : this.dom.offsetWidth;\r\n  }\r\n  // 获取高度\r\n  getHeight() {\r\n    return this.opt.isFullBrowser ? window.innerHeight : this.dom.offsetHeight;\r\n  }\r\n  /**\r\n   * 设置加载模型居中\r\n   * {Object} group 模型对象\r\n   */\r\n  ModelAutoCenter(group) {\r\n    /**\r\n     * 包围盒全自动计算：模型整体居中\r\n     */\r\n    var box3 = new THREE.Box3();\r\n    // 计算层级模型group的包围盒\r\n    // 模型group是加载一个三维模型返回的对象，包含多个网格模型\r\n    box3.expandByObject(group);\r\n    // 计算一个层级模型对应包围盒的几何体中心在世界坐标中的位置\r\n    var center = new THREE.Vector3();\r\n    box3.getCenter(center);\r\n    // console.log('查看几何体中心坐标', center);\r\n\r\n    // 重新设置模型的位置，使之居中。\r\n    group.position.x = group.position.x - center.x;\r\n    group.position.y = group.position.y - center.y;\r\n    group.position.z = group.position.z - center.z;\r\n  }\r\n  //获取模型适合观察的缩放的比例\r\n  getFitScaleValue(obj) {\r\n    var boxHelper = new THREE.BoxHelper(obj);\r\n    boxHelper.geometry.computeBoundingBox();\r\n    var box = boxHelper.geometry.boundingBox;\r\n    var maxDiameter = Math.max(box.max.x - box.min.x, box.max.y - box.min.y, box.max.z - box.min.z);\r\n    // console.log(this.camera.position.z / maxDiameter, \"this.Camera.position.z / maxDiameter\");\r\n    return this.camera.position.z / maxDiameter;\r\n  }\r\n  //设置模型到适合观察的大小\r\n  setScaleToFitSize(obj) {\r\n    // console.log(4848,obj)\r\n    var scaleValue = this.getFitScaleValue(obj) * 0.4;\r\n    // var scaleValue = this.getFitScaleValue(obj);\r\n    obj.scale.set(scaleValue, scaleValue, scaleValue);\r\n    return scaleValue;\r\n  }\r\n  //添加加载进度\r\n  addLoadTip() {\r\n    const element = document.querySelector(\"body\");\r\n    document.querySelector(\".loadTip\") && element.removeChild(document.querySelector(\".loadTip\"));\r\n    let loadTip = document.createElement(\"div\");\r\n    loadTip.className = \"loadTip\";\r\n    loadTip.style.cssText +=\r\n      \"position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:5px;background-color:rgba(0,0,0,0.5);padding:5px 10px;color:#fff;\";\r\n    element.appendChild(loadTip);\r\n    return loadTip;\r\n  }\r\n  //模型TWEEN动画\r\n  TWEENAnimate() {\r\n    // console.log(this.boxHeight)\r\n    this.model.children[0].position.y = this.boxHeight/100+2.3\r\n    // if(this.boxHeight>95){\r\n    //   window.location.href='http://192.168.6.231:8080/#/ModelBox'\r\n    // }\r\n    // var pos = {\r\n    //   y: mesh.position.y,\r\n    // }\r\n    // this.tween = new TWEEN.Tween(pos);\r\n    // // console.log(1,mesh.position.y)\r\n    // this.tween.to({ y: 3.5 }, 2000).onUpdate(function () {\r\n    //   mesh.position.y = pos.y;\r\n    // }).onComplete(()=>{\r\n    //   // http://192.168.6.231:8080/#/ModelBox\r\n    //   // https://wx.wechatlee.com/bbh22/#/ModelBox\r\n    //   window.location.href='http://192.168.6.231:8080/#/ModelBox'\r\n    //   // console.log(window.location.href)\r\n    //   // console.log('执行成功')\r\n    // });\r\n  }\r\n\r\n}\r\n"],"mappings":"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"}]}