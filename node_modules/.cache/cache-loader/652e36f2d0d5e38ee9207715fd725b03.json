{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\src\\views\\mobile\\detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\src\\views\\mobile\\detail.vue","mtime":1672558385765},{"path":"C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\babel.config.js","mtime":1672558385433},{"path":"C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1672558679027},{"path":"C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1672558683394},{"path":"C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\node_modules\\babel-loader\\lib\\index.js","mtime":1672558678446},{"path":"C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\node_modules\\vue-loader\\lib\\index.js","mtime":1672558683459}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gIkBiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yIjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBlbnVtZXJhYmxlT25seSAmJiAoc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pKSwga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gbnVsbCAhPSBhcmd1bWVudHNbaV0gPyBhcmd1bWVudHNbaV0gOiB7fTsgaSAlIDIgPyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKSA6IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gcmV0dXJuIHRhcmdldDsgfQoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAidGhyZWUiOwppbXBvcnQgeyBPcmJpdENvbnRyb2xzIH0gZnJvbSAidGhyZWUvZXhhbXBsZXMvanNtL2NvbnRyb2xzL09yYml0Q29udHJvbHMuanMiOwppbXBvcnQgeyBSR0JFTG9hZGVyIH0gZnJvbSAidGhyZWUvZXhhbXBsZXMvanNtL2xvYWRlcnMvUkdCRUxvYWRlciI7CmltcG9ydCB7IEZCWExvYWRlciB9IGZyb20gInRocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL0ZCWExvYWRlciI7CmltcG9ydCB7IEdMVEZMb2FkZXIgfSBmcm9tICJ0aHJlZS9leGFtcGxlcy9qc20vbG9hZGVycy9HTFRGTG9hZGVyIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJIb21lIiwKICBjb21wb25lbnRzOiB7fSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgU2NlbmU6IG51bGwsCiAgICAgIFJlbmRlcmVyOiBudWxsLAogICAgICBDYW1lcmE6IG51bGwsCiAgICAgIE1vZGVsOiBudWxsLAogICAgICBMaWdodHM6IG51bGwsCiAgICAgIEFuaW1hdGlvbk1peGVyOiBudWxsLAogICAgICBUY2xvY2s6IG5ldyBUSFJFRS5DbG9jaygpLAogICAgICBDb250cm9sczogbnVsbCwKICAgICAgR3JpZEhlbHBlcjogbmV3IFRIUkVFLkdyaWRIZWxwZXIoMzAwLCA1MCwgMHgwMGZmMTIsIDB4ZmZmZmZmKSwKICAgICAgc2hvd1RpcDogdHJ1ZSwKICAgICAgc2VsZWN0TW9kZWxJbmRleDogMCwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIC8vIOmHjeaWsOWKoOi9veasoeaVsAogICAgICBsb2FkaW5nQ291bnQ6IDAsCiAgICAgIGRhdGFJbmZvOiB7fSwKICAgICAgcGFyYW1zOiB7fSwKICAgICAgc2hvd0RldGFpbDogZmFsc2UsCiAgICAgIGF1ZGlvOiBuZXcgQXVkaW8oKSwKICAgICAgcGxheVN0YXRlOiBmYWxzZSwKICAgICAgLy8g5YGH6L+b5bqm5p2hCiAgICAgIHByb2dyZXNzOiAwCiAgICB9OwogIH0sCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIGlmICh0aGlzLnBsYXlTdGF0ZSkgewogICAgICB0aGlzLmF1ZGlvLnBhdXNlKCk7CiAgICAgIHRoaXMucGxheVN0YXRlID0gZmFsc2U7CiAgICB9CgogICAgdGhpcy5hdWRpbyA9IG51bGw7CiAgfSwKICBtZXRob2RzOiB7CiAgICBwbGF5TXAzOiBmdW5jdGlvbiBwbGF5TXAzKCkgewogICAgICB2YXIgX3RoaXMkZGF0YUluZm87CgogICAgICBpZiAoISgoX3RoaXMkZGF0YUluZm8gPSB0aGlzLmRhdGFJbmZvKSAhPT0gbnVsbCAmJiBfdGhpcyRkYXRhSW5mbyAhPT0gdm9pZCAwICYmIF90aGlzJGRhdGFJbmZvLnZvaWNlKSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygi5b2T5YmN5rKh5pyJ6Z+z6aKR5paH5Lu277yBIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoaXNOYU4odGhpcy5hdWRpby5kdXJhdGlvbikpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoIuW9k+WJjemfs+mikeaWh+S7tuacieivr++8gSIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMucGxheVN0YXRlKSB7CiAgICAgICAgdGhpcy5hdWRpby5wYXVzZSgpOwogICAgICAgIHRoaXMucGxheVN0YXRlID0gZmFsc2U7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmF1ZGlvLnBsYXkoKTsKICAgICAgdGhpcy5wbGF5U3RhdGUgPSB0cnVlOwogICAgfSwKICAgIGNoYW5nZVNob3dEZXRhaWw6IGZ1bmN0aW9uIGNoYW5nZVNob3dEZXRhaWwoKSB7CiAgICAgIHRoaXMuc2hvd0RldGFpbCA9ICF0aGlzLnNob3dEZXRhaWw7CiAgICB9LAogICAgZ2V0RGF0YUluZm86IGZ1bmN0aW9uIGdldERhdGFJbmZvKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlc3VsdCwgcGF0aCwgdGVtcDsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKF90aGlzLnBhcmFtcy5pZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2Uud2FybmluZygi6K+36L6T5YWl5a+55bqU55qE5qih5Z6L57yW5Y+3Iik7CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRodHRwLmdldCgiL3dlYnNpdGVBUEkvcG9ydGFsL2NvbGxlY3Rpb25Nb2RlbC8iLmNvbmNhdChfdGhpcy5wYXJhbXMuaWQpKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHBhdGggPSByZXN1bHQuYXR0YWNobWVudFswXS5yZXBsYWNlKCJodHRwOi8venNid2d0ZXN0LmNsb3VkYmVpbmcuY24iLCAiIik7CiAgICAgICAgICAgICAgICB0ZW1wID0gewogICAgICAgICAgICAgICAgICBuYW1lOiByZXN1bHQubmFtZSwKICAgICAgICAgICAgICAgICAgcGF0aDogcGF0aCwKICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFswLCAyLCA1XSwKICAgICAgICAgICAgICAgICAgdHlwZTogcGF0aC5zcGxpdCgiXyIpWzFdCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIF90aGlzLm1vZGVsTG9hZGVyKHRlbXApOwoKICAgICAgICAgICAgICAgIF90aGlzLmRhdGFJbmZvID0gX29iamVjdFNwcmVhZCh7fSwgcmVzdWx0KTsKICAgICAgICAgICAgICAgIF90aGlzLmF1ZGlvLnNyYyA9IHJlc3VsdC52b2ljZSA/IHJlc3VsdC52b2ljZVswXSA6ICIiOwoKICAgICAgICAgICAgICAgIF90aGlzLmF1ZGlvLm9uZW5kZWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLnBsYXlTdGF0ZSA9IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgX3RoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIuaSreaUvue7k+adnyIsCiAgICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlOiBmYWxzZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKCkgewogICAgICB0aGlzLiRyb3V0ZXIuYmFjaygpOwogICAgfSwKICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBfdGhpczIkJHJvdXRlJHF1ZXJ5LCBfdGhpczIkJHJvdXRlJHF1ZXJ5MjsKCiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczIuc2V0U2NlbmUoKTsKCiAgICAgICAgICAgICAgICBfdGhpczIuc2V0UmVuZGVyZXIoKTsKCiAgICAgICAgICAgICAgICBfdGhpczIuc2V0Q2FtZXJhKCk7CgogICAgICAgICAgICAgICAgX3RoaXMyLmFkZENvbnRyb2xzKCk7CgogICAgICAgICAgICAgICAgX3RoaXMyLmFkZExpZ2h0KCk7CgogICAgICAgICAgICAgICAgX3RoaXMyLnBhcmFtcyA9IHsKICAgICAgICAgICAgICAgICAgaWQ6IChfdGhpczIkJHJvdXRlJHF1ZXJ5ID0gX3RoaXMyLiRyb3V0ZS5xdWVyeSkgPT09IG51bGwgfHwgX3RoaXMyJCRyb3V0ZSRxdWVyeSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMyJCRyb3V0ZSRxdWVyeS5pZCwKICAgICAgICAgICAgICAgICAgbm9TaG93SWNvbjogKF90aGlzMiQkcm91dGUkcXVlcnkyID0gX3RoaXMyLiRyb3V0ZS5xdWVyeSkgPT09IG51bGwgfHwgX3RoaXMyJCRyb3V0ZSRxdWVyeTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzMiQkcm91dGUkcXVlcnkyLm5vU2hvd0ljb24KICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgX3RoaXMyLmdldERhdGFJbmZvKCk7IC8v5re75Yqg6L6F5Yqp6Z2i5p2/CgoKICAgICAgICAgICAgICAgIF90aGlzMi5hbmltYXRpb24oKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2V0U2NlbmU6IGZ1bmN0aW9uIHNldFNjZW5lKCkgewogICAgICB2YXIgc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTsgLy8gc2NlbmUuYmFja2dyb3VuZCA9IG5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKCkubG9hZChCRyk7CgogICAgICB0aGlzLlNjZW5lID0gc2NlbmU7IC8v5pi+56S65LiJ57u05Z2Q5qCH57O7CiAgICAgIC8vIHZhciBheGlzID0gbmV3IFRIUkVFLkF4aXNIZWxwZXIoMyk7CiAgICAgIC8vIHNjZW5lLmFkZChheGlzKTsKICAgIH0sCiAgICBzZXRSZW5kZXJlcjogZnVuY3Rpb24gc2V0UmVuZGVyZXIoKSB7CiAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1vYmlsZS1jb250YWluZXIiKTsKICAgICAgdmFyIHJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoewogICAgICAgIGFudGlhbGlhczogdHJ1ZSwKICAgICAgICBhbHBoYTogdHJ1ZSAvLyDpgI/mmI7og4zmma8KCiAgICAgIH0pOyAvLyDorr7nva7muLLmn5PlmajnmoTlg4/ntKDmr5TkvovvvIzmjInnhaforr7lpIcKCiAgICAgIHJlbmRlcmVyLnNldFBpeGVsUmF0aW8od2luZG93LmRldmljZVBpeGVsUmF0aW8pOwogICAgICByZW5kZXJlci5zZXRTaXplKGVsZW1lbnQuY2xpZW50V2lkdGgsIGVsZW1lbnQuY2xpZW50SGVpZ2h0KTsgLy8g6K6+572u5riy5p+T5Yy65Z+f5bC65a+4CgogICAgICByZW5kZXJlci5vdXRwdXRFbmNvZGluZyA9IFRIUkVFLnNSR0JFbmNvZGluZzsgLy8g6Imy6LCD5pig5bCE5bGe5oCnLnRvbmVNYXBwaW5n55So5LqO5Zyo5pmu6YCa6K6h566X5py65pi+56S65Zmo5oiW6ICF56e75Yqo6K6+5aSH5bGP5bmV562J5L2O5Yqo5oCB6IyD5Zu05LuL6LSo5LiK77yM5qih5ouf44CB6YC86L+R6auY5Yqo5oCB6IyD5Zu0KEhEUinmlYjmnpwKCiAgICAgIHJlbmRlcmVyLnRvbmVNYXBwaW5nID0gVEhSRUUuUmVpbmhhcmRUb25lTWFwcGluZzsKICAgICAgcmVuZGVyZXIudG9uZU1hcHBpbmdFeHBvc3VyZSA9IDE7IC8vIOabneWFieezu+aVsAoKICAgICAgdGhpcy5SZW5kZXJlciA9IHJlbmRlcmVyOwogICAgICBlbGVtZW50LmFwcGVuZENoaWxkKHJlbmRlcmVyLmRvbUVsZW1lbnQpOwogICAgfSwKICAgIHNldENhbWVyYTogZnVuY3Rpb24gc2V0Q2FtZXJhKCkgewogICAgICB0aGlzLkNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg0NSwgd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQsIDEsIDEwMDAwKTsKICAgICAgdGhpcy5DYW1lcmEucG9zaXRpb24uc2V0KDAsIDAsIDUwKTsKICAgICAgdGhpcy5DYW1lcmEubG9va0F0KHRoaXMuU2NlbmUucG9zaXRpb24pOwogICAgfSwKICAgIC8v5Yqg6L295qih5Z6LR0xURiBGQlgKICAgIG1vZGVsTG9hZGVyOiBmdW5jdGlvbiBtb2RlbExvYWRlcihNT0RFTCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBsb2FkVGlwID0gdGhpcy5hZGRMb2FkVGlwKCk7CiAgICAgIHRoaXMuQ29udHJvbHMuYXV0b1JvdGF0ZSA9IGZhbHNlOyAvL+a3u+WKoOeOr+Wig2hkcgoKICAgICAgTU9ERUwuaGRyICYmIHRoaXMuSGRyTG9hZGVyKE1PREVMLmhkcik7CiAgICAgIHZhciBMb2FkZXIgPSAiIiwKICAgICAgICAgIE1UWVBFID0gTU9ERUwudHlwZSB8fCAiZ2xiIjsKCiAgICAgIGlmICgiZ2xiLGdsdGYsZ2xURiIuaW5kZXhPZihNVFlQRSkgIT0gLTEpIHsKICAgICAgICBMb2FkZXIgPSBuZXcgR0xURkxvYWRlcigpOwogICAgICB9IGVsc2UgaWYgKCJmYngiLmluZGV4T2YoTVRZUEUpICE9IC0xKSB7CiAgICAgICAgTG9hZGVyID0gbmV3IEZCWExvYWRlcigpOwogICAgICB9IGVsc2UgewogICAgICAgIGxvYWRUaXAudGV4dENvbnRlbnQgPSAi6K+35L2/55SoZ2xiLGdsdGYsZmJ45qC85byP5qih5Z6LIjsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIExvYWRlci5sb2FkKE1PREVMLnBhdGgsIGZ1bmN0aW9uIChnZW9tZXRyeSkgewogICAgICAgIHZhciBfdGhpczMkQ2FtZXJhJHBvc2l0aW87CgogICAgICAgIGxvYWRUaXAudGV4dENvbnRlbnQgPSAi5Yqg6L295a6M5oiQ77yBIjsgLy/np7vpmaTmqKHlnosKCiAgICAgICAgX3RoaXMzLk1vZGVsICYmIF90aGlzMy5TY2VuZS5yZW1vdmUoX3RoaXMzLk1vZGVsKTsgLy/orr7nva7nm7jmnLrkvY3nva4KCiAgICAgICAgKF90aGlzMyRDYW1lcmEkcG9zaXRpbyA9IF90aGlzMy5DYW1lcmEucG9zaXRpb24pLnNldC5hcHBseShfdGhpczMkQ2FtZXJhJHBvc2l0aW8sIF90b0NvbnN1bWFibGVBcnJheShNT0RFTC5wb3NpdGlvbikpOwoKICAgICAgICBfdGhpczMuTW9kZWwgPSAiZmJ4Ii5pbmRleE9mKE1UWVBFKSAhPSAtMSA/IGdlb21ldHJ5IDogZ2VvbWV0cnkuc2NlbmU7IC8v6YGN5Y6G5qih5Z6L5a2X6IqC54K577yM6I635Y+W55u45YWz5Y+C5pWw6K6+572uCgogICAgICAgIF90aGlzMy5Nb2RlbC50cmF2ZXJzZShmdW5jdGlvbiAoY2hpbGQpIHsKICAgICAgICAgIGlmIChjaGlsZC5pc01lc2gpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coY2hpbGQsICJjaGlsZO+8miIsIGNoaWxkLm5hbWUpOyAvLyDpq5jlhYnlgLwg6buY6K6kMzAKCiAgICAgICAgICAgIGNoaWxkLm1hdGVyaWFsLnNoaW5pbmVzcyA9IDE7CiAgICAgICAgICAgIGNoaWxkLmNhc3RTaGFkb3cgPSB0cnVlOwogICAgICAgICAgICBjaGlsZC5yZWNlaXZlU2hhZG93ID0gdHJ1ZTsKICAgICAgICAgICAgY2hpbGQubWF0ZXJpYWwudHJhbnNwYXJlbnQgPSB0cnVlOyAvL+adkOi0qOWFgeiuuOmAj+aYjiDlpoLmnpzmnInnjrvnkoPmnZDotKjml7blvIDlkK8KCiAgICAgICAgICAgIGNoaWxkLm1hdGVyaWFsLm9wYWNpdHkgPSAxOyAvL+adkOi0qOm7mOiupOmAj+aYjuW6pgoKICAgICAgICAgICAgaWYgKGNoaWxkLm5hbWUgPT09ICJNb2RlbF8yIiB8fCBjaGlsZC5tYXRlcmlhbC5uYW1lID09PSAidHJhbnNwYXJlbnQiKSB7CiAgICAgICAgICAgICAgY2hpbGQubWF0ZXJpYWwub3BhY2l0eSA9IDAuMzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOyAvLyDoh6rliqjojrflj5bmnIDkvbPnvKnmlL7mr5TkvosKCgogICAgICAgIF90aGlzMy5zZXRTY2FsZVRvRml0U2l6ZShfdGhpczMuTW9kZWwpOyAvL+aooeWei+iHquWKqOWxheS4rQoKCiAgICAgICAgX3RoaXMzLk1vZGVsQXV0b0NlbnRlcihfdGhpczMuTW9kZWwpOyAvL+afpeaJvuaooeWei+WKqOeUuwoKCiAgICAgICAgaWYgKF90aGlzMy5Nb2RlbC5hbmltYXRpb25zLmxlbmd0aCA+IDApIHsKICAgICAgICAgIF90aGlzMy5BbmltYXRpb25NaXhlciA9IG5ldyBUSFJFRS5BbmltYXRpb25NaXhlcihfdGhpczMuTW9kZWwpOwoKICAgICAgICAgIF90aGlzMy5BbmltYXRpb25NaXhlci5jbGlwQWN0aW9uKF90aGlzMy5Nb2RlbC5hbmltYXRpb25zWzBdKS5wbGF5KCk7CiAgICAgICAgfSAvL+aKiuaooeWei+aUvuWFpeWcuuaZr+S4rQoKCiAgICAgICAgX3RoaXMzLlNjZW5lLmFkZChfdGhpczMuTW9kZWwpOwoKICAgICAgICBjb25zb2xlLmxvZyhfdGhpczMuTW9kZWwsICJtb2RlbCIpOyAvL+WKoOi9veWujOaIkAoKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIOS4jeetieS6jjAg6K+B5piO5L2/55So55qE5YGH6L+b5bqm5p2hCiAgICAgICAgICBpZiAoX3RoaXMzLnByb2dyZXNzICE9PSAwKSB7CiAgICAgICAgICAgIF90aGlzMy5wcm9ncmVzcyA9IDEwMDsKICAgICAgICAgICAgbG9hZFRpcC50ZXh0Q29udGVudCA9IF90aGlzMy5wcm9ncmVzcyArICLliqDovb3kuK0uLi4iOwogICAgICAgICAgfQoKICAgICAgICAgIGxvYWRUaXAuc3R5bGUuZGlzcGxheSA9ICJub25lIjsgLy8gdGhpcy5Db250cm9scy5hdXRvUm90YXRlID0gdHJ1ZTsKICAgICAgICB9LCAxMDAwKTsKICAgICAgfSwgZnVuY3Rpb24gKHhocikgewogICAgICAgIC8v5Yqg6L296L+b5bqmCiAgICAgICAgaWYgKHhoci50b3RhbCA9PT0gMCkgewogICAgICAgICAgaWYgKF90aGlzMy5wcm9ncmVzcyA8IDEwMCkgewogICAgICAgICAgICBfdGhpczMucHJvZ3Jlc3MgKz0gMTsKCiAgICAgICAgICAgIGlmIChfdGhpczMucHJvZ3Jlc3MgPiA5OSkgewogICAgICAgICAgICAgIF90aGlzMy5wcm9ncmVzcyA9IDk5OwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgbG9hZFRpcC50ZXh0Q29udGVudCA9IF90aGlzMy5wcm9ncmVzcyArICIl5Yqg6L295LitLi4uIjsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGxvYWRUaXAudGV4dENvbnRlbnQgPSBwYXJzZUludCh4aHIubG9hZGVkIC8geGhyLnRvdGFsICogMTAwKSArICIl5Yqg6L295LitLi4uIjsgLy8gY29uc29sZS5sb2coeGhyLmxvYWRlZCwgeGhyLnRvdGFsLCB4aHIpOwogICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgbG9hZFRpcC50ZXh0Q29udGVudCA9ICLmqKHlnovliqDovb3lpLHotKXvvIEx56eS5ZCO6YeN5paw5Yqg6L29IjsKICAgICAgICBjb25zb2xlLmxvZygi5qih5Z6L5Yqg6L295aSx6LSl77yBIiwgZXJyKTsKCiAgICAgICAgaWYgKF90aGlzMy5sb2FkaW5nQ291bnQgPT0gMykgewogICAgICAgICAgbG9hZFRpcC50ZXh0Q29udGVudCA9ICLmqKHlnovliqDovb3lpLHotKXvvIzor7fmo4Dmn6Xmlofku7bvvIEiOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKGVyci5tZXNzYWdlLmluY2x1ZGVzKCI0MDQ6IE5vdCBGb3VuZCIpKSB7CiAgICAgICAgICB2YXIgcGF0aCA9IE1PREVMLnBhdGguc3BsaXQoIi4iKVswXTsKICAgICAgICAgIE1PREVMLnBhdGggPSBNT0RFTC50eXBlID09ICJmYngiID8gcGF0aCArICIuZ2xiIiA6IHBhdGggKyAiLmZieCI7CiAgICAgICAgICBNT0RFTC50eXBlID0gTU9ERUwudHlwZSA9PSAiZmJ4IiA/ICJnbGIiIDogImZieCI7CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMzLmxvYWRpbmdDb3VudCArPSAxOwogICAgICAgICAgICBjb25zb2xlLmxvZyhNT0RFTCwgIk1PREVMIik7CgogICAgICAgICAgICBfdGhpczMubW9kZWxMb2FkZXIoTU9ERUwpOwogICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvL+WKoOi9veWFiea6kAogICAgYWRkTGlnaHQ6IGZ1bmN0aW9uIGFkZExpZ2h0KCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHRoaXMuTGlnaHRzID0gW3sKICAgICAgICBuYW1lOiAiQW1iaWVudExpZ2h0IiwKICAgICAgICBvYmo6IG5ldyBUSFJFRS5BbWJpZW50TGlnaHQoMHhmZmZmZmYsIDEpCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiRGlyZWN0aW9uYWxMaWdodCIsCiAgICAgICAgb2JqOiBuZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCgweGZmZmZmZiwgMSksCiAgICAgICAgcG9zaXRpb246IFs4MCwgMTAwLCA1MF0KICAgICAgfV07CiAgICAgIHRoaXMuTGlnaHRzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHZhciBfaXRlbSRvYmokcG9zaXRpb247CgogICAgICAgIGl0ZW0ub2JqLm5hbWUgPSBpdGVtLm5hbWU7CiAgICAgICAgaXRlbS5wb3NpdGlvbiAmJiAoX2l0ZW0kb2JqJHBvc2l0aW9uID0gaXRlbS5vYmoucG9zaXRpb24pLnNldC5hcHBseShfaXRlbSRvYmokcG9zaXRpb24sIF90b0NvbnN1bWFibGVBcnJheShpdGVtLnBvc2l0aW9uKSk7CiAgICAgICAgaXRlbS5IZWxwZXIgPSBuZXcgVEhSRUUuUG9pbnRMaWdodEhlbHBlcihpdGVtLm9iaik7CgogICAgICAgIF90aGlzNC5TY2VuZS5hZGQoaXRlbS5vYmopOwogICAgICB9KTsKICAgIH0sCiAgICAvL+WKoOi9vUhEUui0tOWbvueOr+Wig+WFiQogICAgSGRyTG9hZGVyOiBmdW5jdGlvbiBIZHJMb2FkZXIoSERSKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdmFyIHBtcmVtR2VuZXJhdG9yID0gbmV3IFRIUkVFLlBNUkVNR2VuZXJhdG9yKHRoaXMuUmVuZGVyZXIpOyAvLyDkvb/nlKhoZHLkvZzkuLrog4zmma/oibIKCiAgICAgIHBtcmVtR2VuZXJhdG9yLmNvbXBpbGVFcXVpcmVjdGFuZ3VsYXJTaGFkZXIoKTsKICAgICAgdmFyIHRleHR1cmVMb2FkZXIgPSBuZXcgUkdCRUxvYWRlcigpOwogICAgICB0ZXh0dXJlTG9hZGVyLmxvYWQoSERSLCBmdW5jdGlvbiAodGV4dHVyZSwgdGV4dHVyZURhdGEpIHsKICAgICAgICB2YXIgZW52TWFwID0gcG1yZW1HZW5lcmF0b3IuZnJvbUVxdWlyZWN0YW5ndWxhcih0ZXh0dXJlKS50ZXh0dXJlOwogICAgICAgIGVudk1hcC5pc1BtcmVtVGV4dHVyZSA9IHRydWU7CiAgICAgICAgcG1yZW1HZW5lcmF0b3IuZGlzcG9zZSgpOwogICAgICAgIF90aGlzNS5TY2VuZS5lbnZpcm9ubWVudCA9IGVudk1hcDsgLy8g57uZ5Zy65pmv5re75Yqg546v5aKD5YWJ5pWI5p6cCgogICAgICAgIF90aGlzNS5TY2VuZS5iYWNrZ3JvdW5kID0gZW52TWFwOyAvLyDnu5nlnLrmma/mt7vliqDog4zmma/lm74KICAgICAgfSk7CiAgICB9LAogICAgLy/mt7vliqDkuovku7YKICAgIGFkZENvbnRyb2xzOiBmdW5jdGlvbiBhZGRDb250cm9scygpIHsKICAgICAgdGhpcy5Db250cm9scyA9IG5ldyBPcmJpdENvbnRyb2xzKHRoaXMuQ2FtZXJhLCB0aGlzLlJlbmRlcmVyLmRvbUVsZW1lbnQpOyAvLyDlpoLmnpzkvb/nlKhhbmltYXRl5pa55rOV5pe277yM5bCG5q2k5Ye95pWw5Yig6ZmkCiAgICAgIC8vY29udHJvbHMuYWRkRXZlbnRMaXN0ZW5lciggJ2NoYW5nZScsIHJlbmRlciApOwogICAgICAvLyDkvb/liqjnlLvlvqrnjq/kvb/nlKjml7bpmLvlsLzmiJboh6rovawg5oSP5oCd5piv5ZCm5pyJ5oOv5oCnCgogICAgICB0aGlzLkNvbnRyb2xzLmVuYWJsZURhbXBpbmcgPSB0cnVlOyAvL+aYr+WQpuWPr+S7pee8qeaUvgoKICAgICAgdGhpcy5Db250cm9scy5lbmFibGVab29tID0gdHJ1ZTsgLy/orr7nva7nm7jmnLrot53nprvljp/ngrnnmoTmnIDov5zot53nprst5Y+v5Lul5o6n5Yi257yp5pS+56iL5bqmCgogICAgICB0aGlzLkNvbnRyb2xzLm1pbkRpc3RhbmNlID0gMjsgLy/orr7nva7nm7jmnLrot53nprvljp/ngrnnmoTmnIDov5zot53nprsKCiAgICAgIHRoaXMuQ29udHJvbHMubWF4RGlzdGFuY2UgPSAxMDsgLy84MDAKICAgICAgLy/mmK/lkKblvIDlkK/lj7PplK7mi5bmi70KCiAgICAgIHRoaXMuQ29udHJvbHMuZW5hYmxlUGFuID0gZmFsc2U7IC8v5Yqo5oCB6Zi75bC857O75pWwIOWwseaYr+m8oOagh+aLluaLveaXi+i9rOeBteaVj+W6pgoKICAgICAgdGhpcy5Db250cm9scy5kYW1waW5nRmFjdG9yID0gMC41OyAvL+aYr+WQpuiHquWKqOaXi+i9rAoKICAgICAgdGhpcy5Db250cm9scy5hdXRvUm90YXRlID0gZmFsc2U7CiAgICAgIHRoaXMuQ29udHJvbHMuYXV0b1JvdGF0ZVNwZWVkID0gMTsKICAgIH0sCiAgICAvL+a3u+WKoOWKoOi9vei/m+W6pgogICAgYWRkTG9hZFRpcDogZnVuY3Rpb24gYWRkTG9hZFRpcCgpIHsKICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibW9iaWxlLWNvbnRhaW5lciIpOwogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIubG9hZFRpcCIpICYmIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmxvYWRUaXAiKSk7CiAgICAgIHZhciBsb2FkVGlwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIGxvYWRUaXAuY2xhc3NOYW1lID0gImxvYWRUaXAiOwogICAgICBsb2FkVGlwLnN0eWxlLmNzc1RleHQgKz0gInBvc2l0aW9uOmZpeGVkO3RvcDo1MCU7bGVmdDo1MCU7dHJhbnNmb3JtOnRyYW5zbGF0ZSgtNTAlLC01MCUpO2JvcmRlci1yYWRpdXM6NXB4O2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwwLjUpO3BhZGRpbmc6NXB4IDEwcHg7Y29sb3I6I2ZmZjsiOwogICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGxvYWRUaXApOwogICAgICByZXR1cm4gbG9hZFRpcDsKICAgIH0sCgogICAgLyoqDQogICAgICog6K6+572u5Yqg6L295qih5Z6L5bGF5LitDQogICAgICoge09iamVjdH0gZ3JvdXAg5qih5Z6L5a+56LGhDQogICAgICovCiAgICBNb2RlbEF1dG9DZW50ZXI6IGZ1bmN0aW9uIE1vZGVsQXV0b0NlbnRlcihncm91cCkgewogICAgICAvKioNCiAgICAgICAqIOWMheWbtOebkuWFqOiHquWKqOiuoeeul++8muaooeWei+aVtOS9k+WxheS4rQ0KICAgICAgICovCiAgICAgIHZhciBib3gzID0gbmV3IFRIUkVFLkJveDMoKTsgLy8g6K6h566X5bGC57qn5qih5Z6LZ3JvdXDnmoTljIXlm7Tnm5IKICAgICAgLy8g5qih5Z6LZ3JvdXDmmK/liqDovb3kuIDkuKrkuInnu7TmqKHlnovov5Tlm57nmoTlr7nosaHvvIzljIXlkKvlpJrkuKrnvZHmoLzmqKHlnosKCiAgICAgIGJveDMuZXhwYW5kQnlPYmplY3QoZ3JvdXApOyAvLyDorqHnrpfkuIDkuKrlsYLnuqfmqKHlnovlr7nlupTljIXlm7Tnm5LnmoTlh6DkvZXkvZPkuK3lv4PlnKjkuJbnlYzlnZDmoIfkuK3nmoTkvY3nva4KCiAgICAgIHZhciBjZW50ZXIgPSBuZXcgVEhSRUUuVmVjdG9yMygpOwogICAgICBib3gzLmdldENlbnRlcihjZW50ZXIpOyAvLyBjb25zb2xlLmxvZygn5p+l55yL5Yeg5L2V5L2T5Lit5b+D5Z2Q5qCHJywgY2VudGVyKTsKICAgICAgLy8g6YeN5paw6K6+572u5qih5Z6L55qE5L2N572u77yM5L2/5LmL5bGF5Lit44CCCgogICAgICBncm91cC5wb3NpdGlvbi54ID0gZ3JvdXAucG9zaXRpb24ueCAtIGNlbnRlci54OwogICAgICBncm91cC5wb3NpdGlvbi55ID0gZ3JvdXAucG9zaXRpb24ueSAtIGNlbnRlci55OwogICAgICBncm91cC5wb3NpdGlvbi56ID0gZ3JvdXAucG9zaXRpb24ueiAtIGNlbnRlci56OwogICAgfSwKICAgIC8v5re75Yqg6L6F5Yqp6Z2i5p2/CiAgICBhbmltYXRpb246IGZ1bmN0aW9uIGFuaW1hdGlvbigpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICAvL+abtOaWsOaOp+WItuWZqAogICAgICB0aGlzLlJlbmRlcmVyLnJlbmRlcih0aGlzLlNjZW5lLCB0aGlzLkNhbWVyYSk7CiAgICAgIHRoaXMuQ29udHJvbHMudXBkYXRlKCk7CiAgICAgIHRoaXMuQW5pbWF0aW9uTWl4ZXIgJiYgdGhpcy5BbmltYXRpb25NaXhlci51cGRhdGUodGhpcy5UY2xvY2suZ2V0RGVsdGEoKSk7CiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNi5hbmltYXRpb24oKTsKICAgICAgfSk7CiAgICB9LAogICAgb25XaW5kb3dSZXNpemU6IGZ1bmN0aW9uIG9uV2luZG93UmVzaXplKCkgewogICAgICB0aGlzLkNhbWVyYS5hc3BlY3QgPSB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodDsKICAgICAgdGhpcy5DYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpOwogICAgICB0aGlzLlJlbmRlcmVyLnNldFNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7CiAgICAgIHRoaXMuUmVuZGVyZXIucmVuZGVyKHRoaXMuU2NlbmUsIHRoaXMuQ2FtZXJhKTsKICAgIH0sCiAgICAvL+iOt+WPluaooeWei+mAguWQiOinguWvn+eahOe8qeaUvueahOavlOS+iwogICAgZ2V0Rml0U2NhbGVWYWx1ZTogZnVuY3Rpb24gZ2V0Rml0U2NhbGVWYWx1ZShvYmopIHsKICAgICAgdmFyIGJveEhlbHBlciA9IG5ldyBUSFJFRS5Cb3hIZWxwZXIob2JqKTsKICAgICAgYm94SGVscGVyLmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ0JveCgpOwogICAgICB2YXIgYm94ID0gYm94SGVscGVyLmdlb21ldHJ5LmJvdW5kaW5nQm94OwogICAgICB2YXIgbWF4RGlhbWV0ZXIgPSBNYXRoLm1heChib3gubWF4LnggLSBib3gubWluLngsIGJveC5tYXgueSAtIGJveC5taW4ueSwgYm94Lm1heC56IC0gYm94Lm1pbi56KTsKICAgICAgY29uc29sZS5sb2codGhpcy5DYW1lcmEucG9zaXRpb24ueiAvIG1heERpYW1ldGVyLCAidGhpcy5DYW1lcmEucG9zaXRpb24ueiAvIG1heERpYW1ldGVyIik7CiAgICAgIHJldHVybiB0aGlzLkNhbWVyYS5wb3NpdGlvbi56IC8gbWF4RGlhbWV0ZXI7CiAgICB9LAogICAgLy/orr7nva7mqKHlnovliLDpgILlkIjop4Llr5/nmoTlpKflsI8KICAgIHNldFNjYWxlVG9GaXRTaXplOiBmdW5jdGlvbiBzZXRTY2FsZVRvRml0U2l6ZShvYmopIHsKICAgICAgdmFyIHNjYWxlVmFsdWUgPSB0aGlzLmdldEZpdFNjYWxlVmFsdWUob2JqKSAqIDAuNDsgLy8gdmFyIHNjYWxlVmFsdWUgPSB0aGlzLmdldEZpdFNjYWxlVmFsdWUob2JqKTsKCiAgICAgIG9iai5zY2FsZS5zZXQoc2NhbGVWYWx1ZSwgc2NhbGVWYWx1ZSwgc2NhbGVWYWx1ZSk7CiAgICAgIHJldHVybiBzY2FsZVZhbHVlOwogICAgfSwKICAgIC8vIOaYr+WQpuW8gOWQr+aooeWei+iHquWKqOaXi+i9rAogICAgbW9kZWxBdXRvOiBmdW5jdGlvbiBtb2RlbEF1dG8oKSB7CiAgICAgIHRoaXMuQ29udHJvbHMuYXV0b1JvdGF0ZSA9ICF0aGlzLkNvbnRyb2xzLmF1dG9Sb3RhdGU7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgdGhpcy5pbml0KCk7CgogICAgd2luZG93Lm9ucmVzaXplID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gX3RoaXM3Lm9uV2luZG93UmVzaXplKCk7CiAgICB9OwogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;AACA;AACA;AACA;AAEA;EACAA,YADA;EAEAC,cAFA;EAGAC,IAHA,kBAGA;IACA;MACAC,WADA;MAEAC,cAFA;MAGAC,YAHA;MAIAC,WAJA;MAKAC,YALA;MAMAC,oBANA;MAOAC,yBAPA;MAQAC,cARA;MASAC,6DATA;MAUAC,aAVA;MAWAC,mBAXA;MAYAC,oBAZA;MAaA;MACAC,eAdA;MAeAC,YAfA;MAgBAC,UAhBA;MAiBAC,iBAjBA;MAkBAC,kBAlBA;MAmBAC,gBAnBA;MAoBA;MACAC;IArBA;EAuBA,CA3BA;EA4BAC,aA5BA,2BA4BA;IACA;MACA;MACA;IACA;;IACA;EACA,CAlCA;EAmCAC;IACAC,OADA,qBACA;MAAA;;MACA;QACA;QACA;MACA;;MACA;QACA;QACA;MACA;;MACA;QACA;QACA;QACA;MACA;;MACA;MACA;IACA,CAjBA;IAkBAC,gBAlBA,8BAkBA;MACA;IACA,CApBA;IAqBAC,WArBA,yBAqBA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA,eADA;kBAAA;kBAAA;gBAAA;;gBAEA;;gBAFA;;cAAA;gBAAA;gBAAA,OAKA,6DACA,eADA,EALA;;cAAA;gBAKAC,MALA;gBAQAC,IARA,GAQAD,6BACA,gCADA,EAEA,EAFA,CARA;gBAYAE,IAZA,GAYA;kBACA7B,iBADA;kBAEA4B,UAFA;kBAGAE,mBAHA;kBAIAC;gBAJA,CAZA;;gBAkBA;;gBACA;gBACA;;gBACA;kBACA;;kBACA;oBACAC,eADA;oBAEAC;kBAFA;gBAIA,CANA;;cArBA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IA4BA,CAjDA;IAkDAC,KAlDA,mBAkDA;MACA;IACA,CApDA;IAqDAC,IArDA,kBAqDA;MAAA;;MAAA;QAAA;;QAAA;UAAA;YAAA;cAAA;gBACA;;gBACA;;gBACA;;gBACA;;gBACA;;gBAEA;kBACAC,4HADA;kBAEAC;gBAFA;;gBAIA,qBAXA,CAaA;;;gBACA;;cAdA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAeA,CApEA;IAqEAC,QArEA,sBAqEA;MACA,8BADA,CAEA;;MACA,mBAHA,CAKA;MACA;MACA;IACA,CA7EA;IA8EAC,WA9EA,yBA8EA;MACA;MAEA;QACAC,eADA;QAEAC,WAFA,CAEA;;MAFA,GAHA,CAOA;;MACAC;MACAA,4DATA,CASA;;MACAA,6CAVA,CAWA;;MACAA;MACAA,iCAbA,CAaA;;MAEA;MACAC;IACA,CA/FA;IAgGAC,SAhGA,uBAgGA;MACA,0CACA,EADA,EAEAC,sCAFA,EAGA,CAHA,EAIA,KAJA;MAMA;MACA;IACA,CAzGA;IA0GA;IACAC,WA3GA,uBA2GAC,KA3GA,EA2GA;MAAA;;MACA;MAEA,iCAHA,CAIA;;MACAA;MAEA;MAAA,IACAC,2BADA;;MAGA;QACAC;MACA,CAFA,MAEA;QACAA;MACA,CAFA,MAEA;QACAC;QACA;MACA;;MAEAD,YACAF,UADA,EAEA;QAAA;;QACAG,8BADA,CAEA;;QACA,kDAHA,CAIA;;QACA;;QACA,sEANA,CAQA;;QACA;UACA;YACAC,yCADA,CAEA;;YACAC;YACAA;YACAA;YAEAA,kCAPA,CAOA;;YACAA,2BARA,CAQA;;YACA,IACAA,4BACAA,qCAFA,EAGA;cACAA;YACA;UACA;QACA,CAjBA,EATA,CA2BA;;;QACA,uCA5BA,CA8BA;;;QACA,qCA/BA,CAiCA;;;QACA;UACA;;UACA;QACA,CArCA,CAuCA;;;QACA;;QACAD,mCAzCA,CA2CA;;QACAE;UACA;UACA;YACA;YACAH;UACA;;UACAA,+BANA,CAOA;QACA,CARA,EAQA,IARA;MASA,CAvDA,EAwDA;QACA;QACA;UACA;YACA;;YACA;cACA;YACA;UACA;;UACAA;UACA;QACA;;QACAA,sBACAI,kDADA,CAZA,CAcA;MACA,CAvEA,EAwEA;QACAJ;QACAC;;QAEA;UACAD;UACA;QACA;;QAEA;UACA;UACAH;UACAA;UACAM;YACA;YACAF;;YACA;UACA,CAJA,EAIA,IAJA;QAKA;MACA,CA3FA;IA6FA,CA3NA;IA4NA;IACAI;MAAA;;MACA,eACA;QAAAvD;QAAAwD;MAAA,CADA,EAEA;QACAxD,wBADA;QAEAwD,4CAFA;QAGA1B;MAHA,CAFA;MASA;QAAA;;QACA2B;QACAA;QACAA;;QACA;MACA,CALA;IAMA,CA7OA;IA+OA;IACAC;MAAA;;MACA,6DADA,CACA;;MACAC;MACA;MACAC;QACA;QAEAC;QACAF;QAEA,kCANA,CAMA;;QACA,iCAPA,CAOA;MACA,CARA;IASA,CA7PA;IA8PA;IACAG,WA/PA,yBA+PA;MACA,yEADA,CAEA;MACA;MACA;;MACA,mCALA,CAMA;;MACA,gCAPA,CAQA;;MACA,8BATA,CAUA;;MACA,+BAXA,CAWA;MACA;;MACA,gCAbA,CAcA;;MACA,kCAfA,CAgBA;;MACA;MACA;IACA,CAlRA;IAmRA;IACAC,UApRA,wBAoRA;MACA;MACAC,sCACArB,uDADA;MAEA;MACAO;MACAA,yBACA,gJADA;MAEAP;MACA;IACA,CA9RA;;IA+RA;AACA;AACA;AACA;IACAsB,eAnSA,2BAmSAC,KAnSA,EAmSA;MACA;AACA;AACA;MACA,4BAJA,CAKA;MACA;;MACAC,2BAPA,CAQA;;MACA;MACAA,uBAVA,CAWA;MAEA;;MACAD;MACAA;MACAA;IACA,CApTA;IAqTA;IACAE;MAAA;;MACA;MACA;MACA;MACA;MACAC;QAAA;MAAA;IACA,CA5TA;IA6TAC;MACA;MACA;MACA;MACA;IACA,CAlUA;IAmUA;IACAC,gBApUA,4BAoUAf,GApUA,EAoUA;MACA;MACAgB;MACA;MACA,2BACAC,qBADA,EAEAA,qBAFA,EAGAA,qBAHA;MAKAtB,YACA,oCADA,EAEA,sCAFA;MAIA;IACA,CAlVA;IAmVA;IACAuB,iBApVA,6BAoVAlB,GApVA,EAoVA;MACA,kDADA,CAEA;;MACAA;MACA;IACA,CAzVA;IA0VA;IACAmB,SA3VA,uBA2VA;MACA;IACA;EA7VA,CAnCA;EAkYAC,OAlYA,qBAkYA;IAAA;;IACA;;IACA/B;MAAA;IAAA;EACA;AArYA","names":["name","components","data","Scene","Renderer","Camera","Model","Lights","AnimationMixer","Tclock","Controls","GridHelper","showTip","selectModelIndex","dialogVisible","loadingCount","dataInfo","params","showDetail","audio","playState","progress","beforeDestroy","methods","playMp3","changeShowDetail","getDataInfo","result","path","temp","position","type","message","showClose","close","init","id","noShowIcon","setScene","setRenderer","antialias","alpha","renderer","element","setCamera","window","modelLoader","MODEL","MTYPE","Loader","loadTip","console","child","setTimeout","parseInt","addLight","obj","item","HdrLoader","pmremGenerator","textureLoader","envMap","addControls","addLoadTip","document","ModelAutoCenter","group","box3","animation","requestAnimationFrame","onWindowResize","getFitScaleValue","boxHelper","box","setScaleToFitSize","modelAuto","mounted"],"sourceRoot":"src/views/mobile","sources":["detail.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div id=\"mobile-container\"\r\n         class=\"mobile-three-container\"\r\n         ref=\"three\">\r\n      <template v-if=\"!params.noShowIcon\">\r\n        <div class=\"logo\">\r\n          <img src=\"@/assets/images/logo.png\"\r\n               alt=\"\">\r\n        </div>\r\n        <div class=\"action\"\r\n             :class=\"[{help: dialogVisible}, {detail: showDetail}]\">\r\n          <img src=\"@/assets/images/auto.png\"\r\n               alt=\"\"\r\n               class=\"auto-icon\"\r\n               @click=\"modelAuto()\">\r\n          <img src=\"@/assets/images/detail-icon.png\"\r\n               alt=\"\"\r\n               class=\"detail-icon\"\r\n               @click=\"changeShowDetail()\">\r\n          <img src=\"@/assets/images/help.png\"\r\n               class=\"help-icon\"\r\n               alt=\"\"\r\n               @click=\"dialogVisible=!dialogVisible;\">\r\n          <img src=\"@/assets/images/mp3.png\"\r\n               class=\"play-icon\"\r\n               alt=\"\"\r\n               @click=\"playMp3()\">\r\n        </div>\r\n        <div class=\"close pointer\">\r\n          <img src=\"@/assets/images/close.png\"\r\n               alt=\"\"\r\n               @click=\"close()\">\r\n        </div>\r\n\r\n        <!-- 文物详情 -->\r\n        <template v-if=\"showDetail\">\r\n          <div class=\"mobile-text-content\">\r\n            <div class=\"content\">\r\n              <div class=\"mobile-title\">{{dataInfo.name}}</div>\r\n              <div class=\"mobile-sub-title\">{{dataInfo.description}}</div>\r\n            </div>\r\n          </div>\r\n        </template>\r\n\r\n        <!-- 操作指引 -->\r\n        <template v-if=\"dialogVisible\">\r\n          <div class=\"mobile-guide\">\r\n            <div class=\"content\">\r\n              <img src=\"@/assets/images/guide-1.png\">\r\n              <img src=\"@/assets/images/guide-2.png\">\r\n              <img src=\"@/assets/images/guide-3.png\">\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </template>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as THREE from \"three\";\r\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls.js\";\r\nimport { RGBELoader } from \"three/examples/jsm/loaders/RGBELoader\";\r\nimport { FBXLoader } from \"three/examples/jsm/loaders/FBXLoader\";\r\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\r\n\r\nexport default {\r\n  name: \"Home\",\r\n  components: {},\r\n  data() {\r\n    return {\r\n      Scene: null,\r\n      Renderer: null,\r\n      Camera: null,\r\n      Model: null,\r\n      Lights: null,\r\n      AnimationMixer: null,\r\n      Tclock: new THREE.Clock(),\r\n      Controls: null,\r\n      GridHelper: new THREE.GridHelper(300, 50, 0x00ff12, 0xffffff),\r\n      showTip: true,\r\n      selectModelIndex: 0,\r\n      dialogVisible: false,\r\n      // 重新加载次数\r\n      loadingCount: 0,\r\n      dataInfo: {},\r\n      params: {},\r\n      showDetail: false,\r\n      audio: new Audio(),\r\n      playState: false,\r\n      // 假进度条\r\n      progress: 0,\r\n    };\r\n  },\r\n  beforeDestroy() {\r\n    if (this.playState) {\r\n      this.audio.pause();\r\n      this.playState = false;\r\n    }\r\n    this.audio = null;\r\n  },\r\n  methods: {\r\n    playMp3() {\r\n      if (!this.dataInfo?.voice) {\r\n        this.$message.warning(\"当前没有音频文件！\");\r\n        return;\r\n      }\r\n      if (isNaN(this.audio.duration)) {\r\n        this.$message.warning(\"当前音频文件有误！\");\r\n        return;\r\n      }\r\n      if (this.playState) {\r\n        this.audio.pause();\r\n        this.playState = false;\r\n        return;\r\n      }\r\n      this.audio.play();\r\n      this.playState = true;\r\n    },\r\n    changeShowDetail() {\r\n      this.showDetail = !this.showDetail;\r\n    },\r\n    async getDataInfo() {\r\n      if (!this.params.id) {\r\n        this.$message.warning(\"请输入对应的模型编号\");\r\n        return;\r\n      }\r\n      const result = await this.$http.get(\r\n        `/websiteAPI/portal/collectionModel/${this.params.id}`\r\n      );\r\n      let path = result.attachment[0].replace(\r\n        \"http://zsbwgtest.cloudbeing.cn\",\r\n        \"\"\r\n      );\r\n      const temp = {\r\n        name: result.name,\r\n        path: path,\r\n        position: [0, 2, 5],\r\n        type: path.split(\"_\")[1],\r\n      };\r\n      this.modelLoader(temp);\r\n      this.dataInfo = { ...result };\r\n      this.audio.src = result.voice ? result.voice[0] : \"\";\r\n      this.audio.onended = () => {\r\n        this.playState = false;\r\n        this.$notify({\r\n          message: \"播放结束\",\r\n          showClose: false,\r\n        });\r\n      };\r\n    },\r\n    close() {\r\n      this.$router.back();\r\n    },\r\n    async init() {\r\n      this.setScene();\r\n      this.setRenderer();\r\n      this.setCamera();\r\n      this.addControls();\r\n      this.addLight();\r\n\r\n      this.params = {\r\n        id: this.$route.query?.id,\r\n        noShowIcon: this.$route.query?.noShowIcon,\r\n      };\r\n      this.getDataInfo();\r\n\r\n      //添加辅助面板\r\n      this.animation();\r\n    },\r\n    setScene() {\r\n      const scene = new THREE.Scene();\r\n      // scene.background = new THREE.TextureLoader().load(BG);\r\n      this.Scene = scene;\r\n\r\n      //显示三维坐标系\r\n      // var axis = new THREE.AxisHelper(3);\r\n      // scene.add(axis);\r\n    },\r\n    setRenderer() {\r\n      const element = document.getElementById(\"mobile-container\");\r\n\r\n      const renderer = new THREE.WebGLRenderer({\r\n        antialias: true,\r\n        alpha: true, // 透明背景\r\n      });\r\n      // 设置渲染器的像素比例，按照设备\r\n      renderer.setPixelRatio(window.devicePixelRatio);\r\n      renderer.setSize(element.clientWidth, element.clientHeight); // 设置渲染区域尺寸\r\n      renderer.outputEncoding = THREE.sRGBEncoding;\r\n      // 色调映射属性.toneMapping用于在普通计算机显示器或者移动设备屏幕等低动态范围介质上，模拟、逼近高动态范围(HDR)效果\r\n      renderer.toneMapping = THREE.ReinhardToneMapping;\r\n      renderer.toneMappingExposure = 1; // 曝光系数\r\n\r\n      this.Renderer = renderer;\r\n      element.appendChild(renderer.domElement);\r\n    },\r\n    setCamera() {\r\n      this.Camera = new THREE.PerspectiveCamera(\r\n        45,\r\n        window.innerWidth / window.innerHeight,\r\n        1,\r\n        10000\r\n      );\r\n      this.Camera.position.set(0, 0, 50);\r\n      this.Camera.lookAt(this.Scene.position);\r\n    },\r\n    //加载模型GLTF FBX\r\n    modelLoader(MODEL) {\r\n      const loadTip = this.addLoadTip();\r\n\r\n      this.Controls.autoRotate = false;\r\n      //添加环境hdr\r\n      MODEL.hdr && this.HdrLoader(MODEL.hdr);\r\n\r\n      let Loader = \"\",\r\n        MTYPE = MODEL.type || \"glb\";\r\n\r\n      if (\"glb,gltf,glTF\".indexOf(MTYPE) != -1) {\r\n        Loader = new GLTFLoader();\r\n      } else if (\"fbx\".indexOf(MTYPE) != -1) {\r\n        Loader = new FBXLoader();\r\n      } else {\r\n        loadTip.textContent = \"请使用glb,gltf,fbx格式模型\";\r\n        return;\r\n      }\r\n\r\n      Loader.load(\r\n        MODEL.path,\r\n        (geometry) => {\r\n          loadTip.textContent = \"加载完成！\";\r\n          //移除模型\r\n          this.Model && this.Scene.remove(this.Model);\r\n          //设置相机位置\r\n          this.Camera.position.set(...MODEL.position);\r\n          this.Model = \"fbx\".indexOf(MTYPE) != -1 ? geometry : geometry.scene;\r\n\r\n          //遍历模型字节点，获取相关参数设置\r\n          this.Model.traverse(function (child) {\r\n            if (child.isMesh) {\r\n              console.log(child, \"child：\", child.name);\r\n              // 高光值 默认30\r\n              child.material.shininess = 1;\r\n              child.castShadow = true;\r\n              child.receiveShadow = true;\r\n\r\n              child.material.transparent = true; //材质允许透明 如果有玻璃材质时开启\r\n              child.material.opacity = 1; //材质默认透明度\r\n              if (\r\n                child.name === \"Model_2\" ||\r\n                child.material.name === \"transparent\"\r\n              ) {\r\n                child.material.opacity = 0.3;\r\n              }\r\n            }\r\n          });\r\n          // 自动获取最佳缩放比例\r\n          this.setScaleToFitSize(this.Model);\r\n\r\n          //模型自动居中\r\n          this.ModelAutoCenter(this.Model);\r\n\r\n          //查找模型动画\r\n          if (this.Model.animations.length > 0) {\r\n            this.AnimationMixer = new THREE.AnimationMixer(this.Model);\r\n            this.AnimationMixer.clipAction(this.Model.animations[0]).play();\r\n          }\r\n\r\n          //把模型放入场景中\r\n          this.Scene.add(this.Model);\r\n          console.log(this.Model, \"model\");\r\n\r\n          //加载完成\r\n          setTimeout(() => {\r\n            // 不等于0 证明使用的假进度条\r\n            if (this.progress !== 0) {\r\n              this.progress = 100;\r\n              loadTip.textContent = this.progress + \"加载中...\";\r\n            }\r\n            loadTip.style.display = \"none\";\r\n            // this.Controls.autoRotate = true;\r\n          }, 1000);\r\n        },\r\n        (xhr) => {\r\n          //加载进度\r\n          if (xhr.total === 0) {\r\n            if (this.progress < 100) {\r\n              this.progress += 1;\r\n              if (this.progress > 99) {\r\n                this.progress = 99;\r\n              }\r\n            }\r\n            loadTip.textContent = this.progress + \"%加载中...\";\r\n            return;\r\n          }\r\n          loadTip.textContent =\r\n            parseInt((xhr.loaded / xhr.total) * 100) + \"%加载中...\";\r\n          // console.log(xhr.loaded, xhr.total, xhr);\r\n        },\r\n        (err) => {\r\n          loadTip.textContent = \"模型加载失败！1秒后重新加载\";\r\n          console.log(\"模型加载失败！\", err);\r\n\r\n          if (this.loadingCount == 3) {\r\n            loadTip.textContent = \"模型加载失败，请检查文件！\";\r\n            return;\r\n          }\r\n\r\n          if (err.message.includes(\"404: Not Found\")) {\r\n            const path = MODEL.path.split(\".\")[0];\r\n            MODEL.path = MODEL.type == \"fbx\" ? path + \".glb\" : path + \".fbx\";\r\n            MODEL.type = MODEL.type == \"fbx\" ? \"glb\" : \"fbx\";\r\n            setTimeout(() => {\r\n              this.loadingCount += 1;\r\n              console.log(MODEL, \"MODEL\");\r\n              this.modelLoader(MODEL);\r\n            }, 1000);\r\n          }\r\n        }\r\n      );\r\n    },\r\n    //加载光源\r\n    addLight: function () {\r\n      this.Lights = [\r\n        { name: \"AmbientLight\", obj: new THREE.AmbientLight(0xffffff, 1) },\r\n        {\r\n          name: \"DirectionalLight\",\r\n          obj: new THREE.DirectionalLight(0xffffff, 1),\r\n          position: [80, 100, 50],\r\n        },\r\n      ];\r\n\r\n      this.Lights.map((item) => {\r\n        item.obj.name = item.name;\r\n        item.position && item.obj.position.set(...item.position);\r\n        item.Helper = new THREE.PointLightHelper(item.obj);\r\n        this.Scene.add(item.obj);\r\n      });\r\n    },\r\n\r\n    //加载HDR贴图环境光\r\n    HdrLoader: function (HDR) {\r\n      const pmremGenerator = new THREE.PMREMGenerator(this.Renderer); // 使用hdr作为背景色\r\n      pmremGenerator.compileEquirectangularShader();\r\n      const textureLoader = new RGBELoader();\r\n      textureLoader.load(HDR, (texture, textureData) => {\r\n        const envMap = pmremGenerator.fromEquirectangular(texture).texture;\r\n\r\n        envMap.isPmremTexture = true;\r\n        pmremGenerator.dispose();\r\n\r\n        this.Scene.environment = envMap; // 给场景添加环境光效果\r\n        this.Scene.background = envMap; // 给场景添加背景图\r\n      });\r\n    },\r\n    //添加事件\r\n    addControls() {\r\n      this.Controls = new OrbitControls(this.Camera, this.Renderer.domElement);\r\n      // 如果使用animate方法时，将此函数删除\r\n      //controls.addEventListener( 'change', render );\r\n      // 使动画循环使用时阻尼或自转 意思是否有惯性\r\n      this.Controls.enableDamping = true;\r\n      //是否可以缩放\r\n      this.Controls.enableZoom = true;\r\n      //设置相机距离原点的最远距离-可以控制缩放程度\r\n      this.Controls.minDistance = 2;\r\n      //设置相机距离原点的最远距离\r\n      this.Controls.maxDistance = 10; //800\r\n      //是否开启右键拖拽\r\n      this.Controls.enablePan = false;\r\n      //动态阻尼系数 就是鼠标拖拽旋转灵敏度\r\n      this.Controls.dampingFactor = 0.5;\r\n      //是否自动旋转\r\n      this.Controls.autoRotate = false;\r\n      this.Controls.autoRotateSpeed = 1;\r\n    },\r\n    //添加加载进度\r\n    addLoadTip() {\r\n      const element = document.getElementById(\"mobile-container\");\r\n      document.querySelector(\".loadTip\") &&\r\n        element.removeChild(document.querySelector(\".loadTip\"));\r\n      let loadTip = document.createElement(\"div\");\r\n      loadTip.className = \"loadTip\";\r\n      loadTip.style.cssText +=\r\n        \"position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:5px;background-color:rgba(0,0,0,0.5);padding:5px 10px;color:#fff;\";\r\n      element.appendChild(loadTip);\r\n      return loadTip;\r\n    },\r\n    /**\r\n     * 设置加载模型居中\r\n     * {Object} group 模型对象\r\n     */\r\n    ModelAutoCenter(group) {\r\n      /**\r\n       * 包围盒全自动计算：模型整体居中\r\n       */\r\n      var box3 = new THREE.Box3();\r\n      // 计算层级模型group的包围盒\r\n      // 模型group是加载一个三维模型返回的对象，包含多个网格模型\r\n      box3.expandByObject(group);\r\n      // 计算一个层级模型对应包围盒的几何体中心在世界坐标中的位置\r\n      var center = new THREE.Vector3();\r\n      box3.getCenter(center);\r\n      // console.log('查看几何体中心坐标', center);\r\n\r\n      // 重新设置模型的位置，使之居中。\r\n      group.position.x = group.position.x - center.x;\r\n      group.position.y = group.position.y - center.y;\r\n      group.position.z = group.position.z - center.z;\r\n    },\r\n    //添加辅助面板\r\n    animation: function () {\r\n      //更新控制器\r\n      this.Renderer.render(this.Scene, this.Camera);\r\n      this.Controls.update();\r\n      this.AnimationMixer && this.AnimationMixer.update(this.Tclock.getDelta());\r\n      requestAnimationFrame(() => this.animation());\r\n    },\r\n    onWindowResize: function () {\r\n      this.Camera.aspect = window.innerWidth / window.innerHeight;\r\n      this.Camera.updateProjectionMatrix();\r\n      this.Renderer.setSize(window.innerWidth, window.innerHeight);\r\n      this.Renderer.render(this.Scene, this.Camera);\r\n    },\r\n    //获取模型适合观察的缩放的比例\r\n    getFitScaleValue(obj) {\r\n      var boxHelper = new THREE.BoxHelper(obj);\r\n      boxHelper.geometry.computeBoundingBox();\r\n      var box = boxHelper.geometry.boundingBox;\r\n      var maxDiameter = Math.max(\r\n        box.max.x - box.min.x,\r\n        box.max.y - box.min.y,\r\n        box.max.z - box.min.z\r\n      );\r\n      console.log(\r\n        this.Camera.position.z / maxDiameter,\r\n        \"this.Camera.position.z / maxDiameter\"\r\n      );\r\n      return this.Camera.position.z / maxDiameter;\r\n    },\r\n    //设置模型到适合观察的大小\r\n    setScaleToFitSize(obj) {\r\n      var scaleValue = this.getFitScaleValue(obj) * 0.4;\r\n      // var scaleValue = this.getFitScaleValue(obj);\r\n      obj.scale.set(scaleValue, scaleValue, scaleValue);\r\n      return scaleValue;\r\n    },\r\n    // 是否开启模型自动旋转\r\n    modelAuto() {\r\n      this.Controls.autoRotate = !this.Controls.autoRotate;\r\n    },\r\n  },\r\n  mounted() {\r\n    this.init();\r\n    window.onresize = () => this.onWindowResize();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#mobile-container {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: linear-gradient(-38deg, #c28a57 0%, #ffedad 100%);\r\n\r\n  ::v-deep canvas {\r\n    cursor: grab;\r\n  }\r\n\r\n  .title {\r\n    position: absolute;\r\n    top: 7%;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    text-align: center;\r\n    color: #6f4118;\r\n    width: 100%;\r\n\r\n    .content {\r\n      width: 60%;\r\n      margin: auto;\r\n    }\r\n\r\n    ._title {\r\n      font-size: 36px;\r\n      margin-bottom: 20px;\r\n      letter-spacing: 2px;\r\n    }\r\n\r\n    ._sub-title {\r\n      font-size: 20px;\r\n      line-height: 26px;\r\n      margin-bottom: 10px;\r\n      letter-spacing: 4px;\r\n    }\r\n  }\r\n\r\n  .logo {\r\n    position: absolute;\r\n    top: 5%;\r\n    left: 5%;\r\n    img {\r\n      width: 316px;\r\n      height: 60px;\r\n    }\r\n  }\r\n  .action {\r\n    z-index: 3;\r\n    position: absolute;\r\n    bottom: 4%;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    display: flex;\r\n\r\n    &.help {\r\n      img {\r\n        opacity: 0.4;\r\n        cursor: not-allowed;\r\n        pointer-events: none;\r\n      }\r\n\r\n      .help-icon {\r\n        opacity: 1;\r\n        cursor: pointer;\r\n        pointer-events: auto;\r\n      }\r\n    }\r\n    &.detail {\r\n      img {\r\n        opacity: 0.4;\r\n        cursor: not-allowed;\r\n        pointer-events: none;\r\n      }\r\n\r\n      .detail-icon,\r\n      .play-icon {\r\n        opacity: 1;\r\n        cursor: pointer;\r\n        pointer-events: auto;\r\n      }\r\n    }\r\n\r\n    img {\r\n      cursor: pointer;\r\n      width: 108px;\r\n      height: 108px;\r\n      background-size: cover;\r\n    }\r\n    img + img {\r\n      margin-left: 20px;\r\n    }\r\n  }\r\n\r\n  .close {\r\n    position: absolute;\r\n    top: 5%;\r\n    right: 5%;\r\n    width: 37px;\r\n    height: 41px;\r\n\r\n    img {\r\n      width: 100%;\r\n      height: 100%;\r\n      background-size: cover;\r\n    }\r\n  }\r\n\r\n  .mobile-text-content {\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: rgba(0, 0, 0, 0.7);\r\n\r\n    .content {\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: center;\r\n      padding: 0 80px;\r\n      height: 100%;\r\n    }\r\n\r\n    .mobile-title {\r\n      text-align: center;\r\n      color: #ffffff;\r\n      font-size: 24px;\r\n      letter-spacing: 2px;\r\n    }\r\n\r\n    .mobile-sub-title {\r\n      margin-top: 55px;\r\n      text-align: left;\r\n      font-size: 14px;\r\n      line-height: 1.8;\r\n      letter-spacing: 4px;\r\n      color: #ffffff;\r\n      text-indent: 2em;\r\n      max-height: 676px;\r\n      overflow: hidden;\r\n      overflow-y: auto;\r\n    }\r\n  }\r\n\r\n  .mobile-guide {\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: rgba(0, 0, 0, 0.7);\r\n\r\n    .content {\r\n      height: 100%;\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n      justify-content: center;\r\n    }\r\n\r\n    img {\r\n      width: 193px;\r\n      height: 157px;\r\n      background-size: cover;\r\n\r\n      & + img {\r\n        margin-top: 95px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}