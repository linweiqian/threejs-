{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\src\\tools\\axios.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\src\\tools\\axios.js","mtime":1672558385762},{"path":"C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\babel.config.js","mtime":1672558385433},{"path":"C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1672558679027},{"path":"C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1672558683394},{"path":"C:\\Users\\Administrator\\Desktop\\个人项目\\3d-model-h5game\\node_modules\\babel-loader\\lib\\index.js","mtime":1672558678446}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgTWVzc2FnZSwgTWVzc2FnZUJveCwgTG9hZGluZyB9IGZyb20gImVsZW1lbnQtdWkiOwppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gIi4vYXV0aCI7CnZhciBsb2FkaW5nT2JqID0gbnVsbDsKdmFyIGFwaUNvdW50ID0gMDsgLy8g5Yib5bu6YXhpb3Plrp7kvosKCnZhciBzZXJ2aWNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiAiIiwKICAvLyBhcGnnmoRiYXNlX3VybCBwcm9jZXNzLmVudi5CQVNFX0FQSQogIHRpbWVvdXQ6IDUwMDAgLy8g6K+35rGC6LaF5pe25pe26Ze0Cgp9KTsgLy8gcmVxdWVzdOaLpuaIquWZqAoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIGlmIChnZXRUb2tlbigidG9rZW4iKSkgewogICAgY29uZmlnLmhlYWRlcnMgPSB7CiAgICAgIEF1dGhvcml6YXRpb246ICJUb2tlbiAiICsgZ2V0VG9rZW4oInRva2VuIikgLy/mkLrluKbmnYPpmZDlj4LmlbAKCiAgICB9OwogIH0gLy8g5q+P5qyh6K+35rGC6K+35rGC5qyh5pWw5YqgKzEKCgogIGFwaUNvdW50ICs9IDE7CiAgbG9hZGluZ09iaiA9IExvYWRpbmcuc2VydmljZSh7CiAgICB0ZXh0OiAi5Yqg6L295LitIiwKICAgIHNwaW5uZXI6ICJlbC1pY29uLWxvYWRpbmciLAogICAgYmFja2dyb3VuZDogInJnYmEoMCwgMCwgMCwgMC43KSIKICB9KTsKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOyAvLyByZXNwb25l5oum5oiq5ZmoCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgLy8g55u45bqU5oiQ5Yqf5ZCO6K+35rGC5qyh5pWw5YePMSDkuLow5pe25YWz6Zet5Yqg6L296YGu572p5bGCCiAgdmFyIHJlcyA9IHJlc3BvbnNlLmRhdGE7CiAgYXBpQ291bnQgLT0gMTsKCiAgaWYgKGFwaUNvdW50ID09PSAwKSB7CiAgICBsb2FkaW5nT2JqLmNsb3NlKCk7CiAgfQoKICBpZiAocmVzLkNvZGUgfHwgcmVzLkNvZGUgPT0gMCkgewogICAgLy8gY29uc29sZS5sb2coMTIxMixyZXMuQ29kZSkKICAgIHN3aXRjaCAocmVzLkNvZGUpIHsKICAgICAgY2FzZSAwOgogICAgICAgIHJlcy5mbGFnID0gdHJ1ZTsKICAgICAgICByZXR1cm4gcmVzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAxMDA1OgogICAgICAgIHZhciBEZXZpY2VJRCA9IG51bGw7IC8vZGV2aWNlSUQ9Meadpea6kOS4uuWFrOS8l+WPtwoKICAgICAgICBEZXZpY2VJRCA9IERldmljZUlEID09IG51bGwgPyAxIDogRGV2aWNlSUQ7IC8vaHR0cHM6Ly93Y2x3eC5nemNsb3VkYmVpbmcuY29tCiAgICAgICAgLy9odHRwczovL3d4LndlY2hhdGxlZS5jb20KICAgICAgICAvL3dpbmRvdy5sb2NhdGlvbi5vcmlnaW4KCiAgICAgICAgbG9jYXRpb24ucmVwbGFjZSgiaHR0cHM6Ly93eC53ZWNoYXRsZWUuY29tL1dYUGF5RXhhbXBsZS9Qcm9kdWN0UGFnZS5hc3B4P3VybD0iICsgZXNjYXBlKGxvY2F0aW9uLmhyZWYgKyAobG9jYXRpb24uaHJlZi5pbmRleE9mKCc/JykgPj0gMCA/ICcmRGV2aWNlSUQ9JyA6ICc/RGV2aWNlSUQ9JykgKyBEZXZpY2VJRCkpOwogICAgICAgIGxvY2F0aW9uLmhyZWYuaW5kZXhPZignPycpID49IDAgPyAnJkRldmljZUlEPTEnIDogJz9EZXZpY2VJRD0xJzsKICAgICAgICBicmVhazsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmVzLmZsYWcgPSBmYWxzZTsKICAgICAgICByZXR1cm4gcmVzOwogICAgICAgIGJyZWFrOwogICAgfQogIH0gZWxzZSB7CiAgICByZXR1cm4gcmVzOwogIH0KICAvKioNCiAgICogY29kZToyMDAs5o6l5Y+j5q2j5bi46L+U5ZueOw0KICAgKi8KICAvLyBpZiAocmVzLmNvZGUgIT09IDIwMCkgewogIC8vICAgLy8gTWVzc2FnZSh7CiAgLy8gICAvLyAgIG1lc3NhZ2U6IHJlcy5tZXNzYWdlLAogIC8vICAgLy8gICB0eXBlOiAiZXJyb3IiLAogIC8vICAgLy8gICBkdXJhdGlvbjogNSAqIDEwMDAsCiAgLy8gICAvLyB9KTsKICAvLyAgIC8vIOagueaNruacjeWKoeerr+e6puWumueahOeKtuaAgeegge+8mjUwMDE66Z2e5rOV55qEdG9rZW47IDUwMDI65YW25LuW5a6i5oi356uv55m75b2V5LqGOyA1MDA0OlRva2VuIOi/h+acn+S6hjsKICAvLyAgIGlmIChyZXMuY29kZSA9PT0gNDAxKSB7CiAgLy8gICAgIE1lc3NhZ2VCb3guY29uZmlybSgi55m75b2V5bey6L+H5pyfIiwgIuehruWumumAgOWHuiIsIHsKICAvLyAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIumHjeaWsOeZu+W9lSIsCiAgLy8gICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsCiAgLy8gICAgICAgdHlwZTogIndhcm5pbmciLAogIC8vICAgICB9KS50aGVuKCgpID0+IHsKICAvLyAgICAgICAvLyBzdG9yZS5kaXNwYXRjaCgiTG9nT3V0IikudGhlbigoKSA9PiB7CiAgLy8gICAgICAgLy8gICBsb2NhdGlvbi5yZWxvYWQoKTsgLy8g5Li65LqG6YeN5paw5a6e5L6L5YyWdnVlLXJvdXRlcuWvueixoSDpgb/lhY1idWcKICAvLyAgICAgICAvLyB9KTsKICAvLyAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAvLyAgICAgfSk7CiAgLy8gICB9CiAgLy8gICByZXR1cm4gUHJvbWlzZS5yZWplY3QoImVycm9yIik7CiAgLy8gfSBlbHNlIHsKICAvLyAgIC8vIHJlcy5jb2RlID09PSAyMDAs5q2j5bi46L+U5Zue5pWw5o2uCiAgLy8gICByZXR1cm4gcmVzcG9uc2UuZGF0YT8uZGF0YTsKICAvLyB9Cgp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBhcGlDb3VudCAtPSAxOwoKICBpZiAoYXBpQ291bnQgPT09IDApIHsKICAgIGxvYWRpbmdPYmouY2xvc2UoKTsKICB9IC8vIGlmIChlcnJvci5zdGF0aWMgPT09IDQwMSB8fCBlcnJvci5zdGF0ZSA9PT0gNDAxKSB7CiAgLy8gICBNZXNzYWdlQm94LmNvbmZpcm0oIueZu+W9leW3sui/h+acnyIsICLnoa7lrprpgIDlh7oiLCB7CiAgLy8gICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi6YeN5paw55m75b2VIiwKICAvLyAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsCiAgLy8gICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAvLyAgIH0pLnRoZW4oKCkgPT4gewogIC8vICAgICAvLyBzdG9yZS5kaXNwYXRjaCgiTG9nT3V0IikudGhlbigoKSA9PiB7CiAgLy8gICAgIC8vICAgbG9jYXRpb24ucmVsb2FkKCk7IC8vIOS4uuS6humHjeaWsOWunuS+i+WMlnZ1ZS1yb3V0ZXLlr7nosaEg6YG/5YWNYnVnCiAgLy8gICAgIC8vIH0pOwogIC8vICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAvLyAgIH0pOwogIC8vIH0KICAvLyBNZXNzYWdlKHsKICAvLyAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsCiAgLy8gICB0eXBlOiAiZXJyb3IiLAogIC8vICAgZHVyYXRpb246IDUgKiAxMDAwLAogIC8vIH0pOwoKCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CmV4cG9ydCBkZWZhdWx0IHNlcnZpY2U7"},{"version":3,"names":["axios","Message","MessageBox","Loading","getToken","loadingObj","apiCount","service","create","baseURL","timeout","interceptors","request","use","config","headers","Authorization","text","spinner","background","error","Promise","reject","response","res","data","close","Code","flag","DeviceID","location","replace","escape","href","indexOf"],"sources":["C:/Users/Administrator/Desktop/个人项目/3d-model-h5game/src/tools/axios.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { Message, MessageBox, Loading } from \"element-ui\";\r\nimport { getToken } from \"./auth\";\r\n\r\nlet loadingObj = null;\r\nlet apiCount = 0;\r\n\r\n// 创建axios实例\r\nlet service = axios.create({\r\n  baseURL: \"\", // api的base_url process.env.BASE_API\r\n  timeout: 5000, // 请求超时时间\r\n});\r\n// request拦截器\r\nservice.interceptors.request.use(\r\n  (config) => {\r\n    if (getToken(\"token\")) {\r\n      config.headers = {\r\n        Authorization: \"Token \" + getToken(\"token\"), //携带权限参数\r\n      };\r\n    }\r\n\r\n    // 每次请求请求次数加+1\r\n    apiCount += 1;\r\n    loadingObj = Loading.service({\r\n      text: \"加载中\",\r\n      spinner: \"el-icon-loading\",\r\n      background: \"rgba(0, 0, 0, 0.7)\",\r\n    });\r\n    return config;\r\n  },\r\n  (error) => {\r\n    Promise.reject(error);\r\n  }\r\n);\r\n\r\n// respone拦截器\r\nservice.interceptors.response.use(\r\n  (response) => {\r\n    // 相应成功后请求次数减1 为0时关闭加载遮罩层\r\n    const res = response.data;\r\n\r\n    apiCount -= 1;\r\n    if (apiCount === 0) {\r\n      loadingObj.close();\r\n    }\r\n    \r\n    if(res.Code||res.Code==0){\r\n      // console.log(1212,res.Code)\r\n      switch (res.Code) {\r\n        case 0:\r\n          res.flag=true\r\n          return res\r\n          break;\r\n        case 1005:\r\n          var DeviceID=null;\r\n          //deviceID=1来源为公众号\r\n          DeviceID=DeviceID==null?1:DeviceID;\r\n          //https://wclwx.gzcloudbeing.com\r\n          //https://wx.wechatlee.com\r\n          //window.location.origin\r\n          location.replace(\"https://wx.wechatlee.com/WXPayExample/ProductPage.aspx?url=\" + escape(location.href + (location.href.indexOf('?') >= 0 ? '&DeviceID=' : '?DeviceID=')+DeviceID));\r\n          (location.href.indexOf('?') >= 0 ? '&DeviceID=1' : '?DeviceID=1')\r\n          break;\r\n        default:\r\n          res.flag=false       \r\n          return res\r\n          break;\r\n      }\r\n    }else{   \r\n      return res;\r\n    }     \r\n    /**\r\n     * code:200,接口正常返回;\r\n     */\r\n    // if (res.code !== 200) {\r\n    //   // Message({\r\n    //   //   message: res.message,\r\n    //   //   type: \"error\",\r\n    //   //   duration: 5 * 1000,\r\n    //   // });\r\n    //   // 根据服务端约定的状态码：5001:非法的token; 5002:其他客户端登录了; 5004:Token 过期了;\r\n    //   if (res.code === 401) {\r\n    //     MessageBox.confirm(\"登录已过期\", \"确定退出\", {\r\n    //       confirmButtonText: \"重新登录\",\r\n    //       cancelButtonText: \"取消\",\r\n    //       type: \"warning\",\r\n    //     }).then(() => {\r\n    //       // store.dispatch(\"LogOut\").then(() => {\r\n    //       //   location.reload(); // 为了重新实例化vue-router对象 避免bug\r\n    //       // });\r\n\r\n    //       location.reload();\r\n    //     });\r\n    //   }\r\n    //   return Promise.reject(\"error\");\r\n    // } else {\r\n    //   // res.code === 200,正常返回数据\r\n    //   return response.data?.data;\r\n    // }\r\n  },\r\n  (error) => {\r\n    apiCount -= 1;\r\n    if (apiCount === 0) {\r\n      loadingObj.close();\r\n    }\r\n\r\n    // if (error.static === 401 || error.state === 401) {\r\n    //   MessageBox.confirm(\"登录已过期\", \"确定退出\", {\r\n    //     confirmButtonText: \"重新登录\",\r\n    //     cancelButtonText: \"取消\",\r\n    //     type: \"warning\",\r\n    //   }).then(() => {\r\n    //     // store.dispatch(\"LogOut\").then(() => {\r\n    //     //   location.reload(); // 为了重新实例化vue-router对象 避免bug\r\n    //     // });\r\n\r\n    //     location.reload();\r\n    //   });\r\n    // }\r\n\r\n    // Message({\r\n    //   message: error.message,\r\n    //   type: \"error\",\r\n    //   duration: 5 * 1000,\r\n    // });\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default service;\r\n"],"mappings":"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"}]}